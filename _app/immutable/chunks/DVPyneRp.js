import"./Bg9kRutz.js";import{p as pt,t as bt,d as t,s as o,r as e,a as gt,b as ht,c as yt,f as Vt,i as a,z as g,k as at}from"./DA61WD3S.js";import{d as Wt,o as _t,s as i}from"./DwvvTgU3.js";import{s as f}from"./ndif8Qsv.js";import{s as vt}from"./BbVpoC1u.js";import{N as zt}from"./D6bIq9LY.js";import{y as B,p as Ft,q as s,k as j,e as Ut,P as E,Q as P}from"./E28ZXaGp.js";import{N as ft}from"./DNDYSuZN.js";import{S as ot}from"./CLpWN2Xq.js";import{T as Gt}from"./CmRE5a5A.js";import{Q as mt}from"./BOLye8zL.js";import{i as Jt}from"./BHqHQaC0.js";class Kt extends ot{constructor(d,u){super(d),this.hPd=ot.roundTo(u/5,2)}getRemainingAccountableDatesOfYear(){const d=[];for(const u of this.allDatesRemaining){const h=B.getDay(u);Jt(u)||h.dayType===Ft.Regular&&d.push(u)}return d}getRemainingHoursInHomeOffice(d){return s.rune.contract.homeOfficeQuota*(d.total+this.getRemainingAccountableDatesOfYear().length*this.hPd)-d.home}}var Xt=bt('<div class="card mt-3 mb-3 shadow-sm"><div class="card-body"><h5 class="card-title">Corrections</h5> <p class="card-text">To correct the calculation of your remaining homeoffice allocations, you can provide a date along with the total number of working hours and the achieved homeoffice quota up to this date. Dates before the specified correction date are not considered in the calculations. To enable corrections set a date, vice versa delete the date to disable corrections.</p> <ul class="list-group mb-4"><li class="list-group-item"><div class="d-flex justify-content-between"><div><div class="fw-bold">Effective date</div> Set the date (including) for the days you want to overwrite.</div> <div class="form-check form-switch d-flex align-items-center"><input class="form-control me-1" type="date" id="quotaCorrectionDate"></div></div></li> <li class="list-group-item"><div class="d-flex justify-content-between"><div><div class="fw-bold">Quota</div> Set your homeoffice quota in decimal notation for the specified date.</div> <div class="form-check form-switch d-flex align-items-center"><input id="quotaCorrectionInput" type="number" class="form-control" placeholder="0" min="0" max="1" step="0.01" required></div></div></li> <li class="list-group-item"><div class="d-flex justify-content-between"><div><div class="fw-bold">Hours</div> Set your total number working hours for the specified date..</div> <div class="form-check form-switch d-flex align-items-center"><input id="hoursCorrectionInput" type="number" class="form-control" placeholder="0" min="0" max="3000" step="1" require=""></div></div></li></ul></div></div>');function Zt(S,d){pt(d,!0);function u(){const c=document.getElementById("quotaCorrectionInput");c.reportValidity()&&(s.rune.contract.quotaCorrection.quota=parseFloat(c.value),E.modified())}function h(){const c=document.getElementById("hoursCorrectionInput");c.reportValidity()&&(s.rune.contract.quotaCorrection.workingHours=parseInt(c.value),E.modified())}function Q(c){if(!c.target.value){s.rune.contract.quotaCorrection.quotaDate=null,E.modified();return}const q=c.target.value.split("-");s.rune.contract.quotaCorrection.quotaDate=new Date(q[0],q[1]-1,q[2]),E.modified()}function T(){document.getElementById("quotaCorrectionInput").value=s.rune.contract.quotaCorrection.quota,s.rune.contract.quotaCorrection.quotaDate&&(document.getElementById("quotaCorrectionDate").value=j(s.rune.contract.quotaCorrection.quotaDate,"yyyy-MM-dd")),document.getElementById("hoursCorrectionInput").value=s.rune.contract.quotaCorrection.workingHours}_t(()=>{T()});var n=Xt(),w=t(n),v=o(t(w),4),r=t(v),p=t(r),x=o(t(p),2),y=t(x);y.__change=Q,e(x),e(p),e(r);var C=o(r,2),H=t(C),D=o(t(H),2),A=t(D);A.__focusout=u,e(D),e(H),e(C);var O=o(C,2),_=t(O),k=o(t(_),2),I=t(k);I.__focusout=h,e(k),e(_),e(O),e(v),e(w),e(n),gt((c,Y)=>{f(y,"min",c),f(y,"max",Y)},[()=>j(new Date(B.rune.yearLiteral,0),"yyyy-MM-dd"),()=>j(Ut(new Date(B.rune.yearLiteral,0)),"yyyy-MM-dd")]),ht(S,n),yt()}Wt(["change","focusout"]);var te=bt(`<!> <div class="container mt-3 mb-3"><div class="card mt-3 mb-3 shadow-sm clickable"><div class="card-body"><h5 class="card-title">Status Report</h5> <p class="card-text">Considering the time period from <b> </b> to <b> </b>.</p> <p class="card-text">You have worked a total of <b> </b> hours. You spend <b> </b> at home 
                and <b> </b> at the office. Which gives the following distribution.
                Your current homeoffice quota is <b> </b> <i> </i>.</p> <div class="progress-stacked mb-3 border"><div class="progress" role="progressbar"><div data-bs-toggle="tooltip" data-bs-placement="bottom"> </div></div> <div class="progress" role="progressbar"><div class="progress-bar office-bg svelte-1wq0gv9" data-bs-toggle="tooltip" data-bs-placement="bottom"> </div></div></div> <p class="card-text">The remaining year has <b> </b> working days left. That means, to achieve a perfect quota, you can spend another <b> </b> hours at home. This is approximately <b> </b> days.</p> <p class="card-text">You projected distribution for the rest of the year is:</p> <div class="progress-stacked mb-3 border"><div class="progress" role="progressbar"><div data-bs-toggle="tooltip" data-bs-placement="bottom"> </div></div> <div class="progress" role="progressbar"><div class="progress-bar office-bg svelte-1wq0gv9" data-bs-toggle="tooltip" data-bs-placement="bottom"> </div></div></div></div></div> <!></div>`,1);function fe(S,d){pt(d,!0);let u=g(()=>s.rune.contract.quotaCorrection.quotaDate),h=g(()=>s.rune.contract.quotaCorrection.quota),Q=g(()=>s.rune.contract.quotaCorrection.workingHours);const T=s.rune.contract.homeOfficeQuota,n=ot.roundTo,w=m=>j(m,"dd.MM.yyyy"),v=new Kt(B.rune.yearLiteral,s.rune.contract.workingHours);let r=g(()=>mt.collect(v.allDatesUpToToday,a(u),a(h),a(Q))),p=g(()=>mt.collect(v.allDatesOfYear,a(u),a(h),a(Q))),x=g(()=>v.getRemainingHoursInHomeOffice(a(r)));function y(m){let l=m.home/m.total;l=isNaN(l)?0:l;const b=T-l;return b>=.1?"bg-success":b>=0?"bg-warning":"bg-danger"}function C(m){let l=m.home/m.total;l=isNaN(l)?0:l;const b=T-l;return b>=.1?"Ok":b>=0?"Ok, but close":"Overshooting"}_t(()=>{Gt.enable()});var H=te(),D=Vt(H);const A=g(()=>[ft.HomeItem(),ft.UpItem()]);zt(D,{name:"Status",get navItems(){return a(A)}});var O=o(D,2),_=t(O),k=t(_),I=o(t(k),2),c=o(t(I)),Y=t(c,!0);e(c);var q=o(c,2),qt=t(q,!0);e(q),at(),e(I);var L=o(I,2),V=o(t(L)),wt=t(V,!0);e(V);var W=o(V,2),xt=t(W,!0);e(W);var z=o(W,2),Ct=t(z,!0);e(z);var F=o(z,2),Ht=t(F);e(F);var rt=o(F),it=o(rt),Dt=t(it,!0);e(it),at(),e(L);var U=o(L,2),M=t(U),R=t(M),Ot=t(R,!0);e(R),e(M);var G=o(M,2),J=t(G),kt=t(J,!0);e(J),e(G),e(U);var K=o(U,2),X=o(t(K)),It=t(X,!0);e(X);var Z=o(X,2),St=t(Z,!0);e(Z);var st=o(Z,2),Qt=t(st,!0);e(st),at(),e(K);var nt=o(K,4),$=t(nt),N=t($),Tt=t(N,!0);e(N),e($);var tt=o($,2),et=t(tt),Yt=t(et,!0);e(et),e(tt),e(nt),e(k),e(_);var Mt=o(_,2);Zt(Mt,{}),e(O),gt((m,l,b,Rt,$t,Nt,Et,ct,Pt,dt,jt,Bt,At,ut,Lt,lt)=>{i(Y,m),i(qt,l),i(wt,b),i(xt,Rt),i(Ct,$t),i(Ht,`${Nt??""}%`),i(rt,` with a limit at ${s.rune.contract.homeOfficeQuota*100}%, therefore you are `),i(Dt,Et),f(M,"style",`width: ${ct??""}%;`),vt(R,1,`progress-bar ${Pt??""}`,"svelte-1wq0gv9"),f(R,"data-bs-title",`Homeoffice quota: ${ct??""}%`),i(Ot,P.Home),f(G,"style",`width: ${dt??""}%;`),f(J,"data-bs-title",`Office: ${dt??""}%`),i(kt,P.Office),i(It,jt),i(St,Bt),i(Qt,At),f($,"style",`width: ${ut??""}%;`),vt(N,1,`progress-bar ${Lt??""}`,"svelte-1wq0gv9"),f(N,"data-bs-title",`Homeoffice quota: ${ut??""}%`),i(Tt,P.Home),f(tt,"style",`width: ${lt??""}%;`),f(et,"data-bs-title",`Office: ${lt??""}%`),i(Yt,P.Office)},[()=>w(v.startOfYear),()=>w(v.todayOrEndOfYear),()=>n(a(r).total,2),()=>n(a(r).home,2),()=>n(a(r).office,2),()=>n(a(r).home/a(r).total*100,3),()=>C(a(r)),()=>n(a(r).home/a(r).total,4)*100,()=>y(a(r)),()=>n(a(r).office/a(r).total,4)*100,()=>v.getRemainingAccountableDatesOfYear().length,()=>n(a(x),2),()=>n(a(x)/v.hPd),()=>n(a(p).home/a(p).total,4)*100,()=>y(a(p)),()=>n(a(p).office/a(p).total,4)*100]),ht(S,H),yt()}export{fe as S};
