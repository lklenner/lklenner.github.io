var i=a=>{throw TypeError(a)};var c=(a,e,t)=>e.has(a)||i("Cannot "+t);var r=(a,e,t)=>(c(a,e,"read from private field"),t?t.call(a):e.get(a)),l=(a,e,t)=>e.has(a)?i("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t);import{i as g}from"./DA61WD3S.js";import{b as p,a as h}from"./DwvvTgU3.js";import{p as m}from"./D8MQwctJ.js";var s;const n=class n{constructor(){l(this,s,p(!1));this.broadcastChannel=new BroadcastChannel("quota_channel")}get claimed(){return g(r(this,s))}set claimed(e){h(r(this,s),m(e))}static preregister_handler(e){e.data.type==="tab_claimed"&&(d.claimed=!0,console.log("Original tab detected:",e.data.id))}preregister(){console.log("Preregister."),this.broadcastChannel.postMessage({type:"tab_opened",id:Date.now()}),this.broadcastChannel.onmessage=n.preregister_handler}unpreregsiter(){console.log("Unpreregsiter."),this.broadcastChannel.onmessage=null}register(){console.log("Reregister."),this.broadcastChannel.postMessage({type:"tab_claimed",id:Date.now()}),this.broadcastChannel.onmessage=e=>{e.data.type==="tab_opened"&&d.broadcastChannel.postMessage({type:"tab_claimed",id:Date.now()})}}};s=new WeakMap;let o=n;const d=new o;export{d as s};
