import"../chunks/Bg9kRutz.js";import{p as U,f as V,k as t,A as l,s as f,c as s,r,t as h,a as X}from"../chunks/B_fWjAJn.js";import{t as D,a as y,c as _t}from"../chunks/CGZ7VXBK.js";import{t as Z,q as gt,r as yt,y as g,g as A,k as T,a as bt,u as kt,T as ht,n as wt,f as xt}from"../chunks/OwI2tFtm.js";import{R as Dt}from"../chunks/DtyOdfFN.js";import{a as Ot}from"../chunks/DmNFN6rQ.js";import{s as w}from"../chunks/DuGrHTQZ.js";import{s as K}from"../chunks/Ct4An_w0.js";import{s as St}from"../chunks/99q-nmkb.js";import{d as $t}from"../chunks/dYPrhcUL.js";import{o as Nt,c as Wt}from"../chunks/CRjo6MhA.js";import{p as I}from"../chunks/CKoJ0kxm.js";import{N as Lt}from"../chunks/BRgEesOk.js";import{N as Q}from"../chunks/C4r051LV.js";import{g as x}from"../chunks/tkmHHtdh.js";import{A as Mt,a as At}from"../chunks/DlkemsOt.js";import{g as Tt}from"../chunks/DmBoMC2l.js";import{g as It}from"../chunks/CkCys3ap.js";function Rt(v,c){const e=c==null?void 0:c.weekStartsOn,n=Z(v),d=n.getDay(),p=(d<e?-7:0)+6-(d-e);return n.setDate(n.getDate()+p),n.setHours(23,59,59,999),n}function jt(v,c,e){const n=Z(v),d=gt(n,e)-c;return n.setDate(n.getDate()-d*7),n}const Bt=!1,de=Object.freeze(Object.defineProperty({__proto__:null,prerender:Bt},Symbol.toStringTag,{value:"Module"}));var Et=(v,c,e)=>c(t(e)),Ft=D('<th scope="col"> </th>'),Yt=D("<td> </td>"),Ht=D("<tr><td> </td><!></tr>"),qt=D('<!> <div class="container mt-3"><h1> </h1></div> <div class="d-flex mt-3 mb-3"><div class="d-flex m-4 align-items-center"><button class="btn btn-outline-secondary py-4 d-flex align-items-center"><!></button></div> <div class="container"><table class="table"><thead><tr><th scope="col">Task</th><!></tr></thead><tbody></tbody></table></div> <div class="d-flex m-4 align-items-center"><button class="btn btn-outline-secondary py-4 d-flex align-items-center"><!></button></div></div>',1);function zt(v,c){U(c,!0),console.log(I.params.week);const e=l(()=>Number(I.params.week)),n=yt(new Date(g.rune.yearLiteral,0)),d=l(()=>jt(n,I.params.week)),p=l(()=>kt(t(d),{weekStartsOn:1})),tt=l(()=>Rt(t(p),{weekStartsOn:1})),et=l(()=>It(t(d))),O=l(()=>bt({start:t(p),end:t(tt)})),R=l(()=>Tt(Number(g.rune.yearLiteral))),j=l(()=>ot(t(O))),at=l(()=>t(j)[0]),rt=l(()=>t(j)[1]);function ot(o){const i=new Set,a=[];for(const m of o){const _=g.getDay(m),u=ht.aggregateDurations(_.timesheet);Object.keys(u).forEach(L=>{i.add(L)}),a.push(u)}return[Array.from(i).sort(),a]}function st(o,i){const a=t(rt)[i];return o in a?a[o].toFixed(2):0}function nt(){x(`/app/year/${t(et)}`)}function B(){x(`/app/year/week/${t(e)-1}`)}function E(){x(`/app/year/week/${t(e)+1}`)}function it(o){const i=o.getDate(),a=o.getMonth(),m=o.getFullYear();Number(g.rune.yearLiteral)==m&&x(`/app/year/${a}/${i}/timesheet`)}function F(o){o.key=="ArrowLeft"&&1<t(e)?B():o.key=="ArrowRight"&&t(e)<t(R)&&E()}Nt(()=>{window.addEventListener("keydown",F)}),Wt(()=>{window.removeEventListener("keydown",F)});var Y=qt(),H=V(Y);const ct=l(()=>[Q.HomeItem(),Q.Item("Days",nt)]);Lt(H,{name:"Timesheet",get navItems(){return t(ct)}});var S=f(H,2),q=s(S),dt=s(q);r(q),r(S);var z=f(S,2),$=s(z),b=s($);b.__click=B;var lt=s(b);Mt(lt,{}),r(b),r($);var N=f($,2),C=s(N),W=s(C),P=s(W),mt=f(s(P));A(mt,17,()=>t(O),T,(o,i)=>{var a=Ft();a.__click=[Et,it,i];var m=s(a,!0);r(a),h((_,u)=>{St(a,1,_,"svelte-s66s5j"),w(m,u)},[()=>Number(g.rune.yearLiteral)==t(i).getFullYear()?"clickable":"",()=>wt(t(i),"dd.MM")]),y(o,a)}),r(P),r(W);var G=f(W);A(G,21,()=>t(at),T,(o,i)=>{var a=Ht(),m=s(a),_=s(m,!0);r(m);var u=f(m);A(u,17,()=>t(O),T,(L,Ct,ft)=>{var M=Yt(),pt=s(M,!0);r(M),h(ut=>w(pt,ut),[()=>st(t(i),ft)]),y(L,M)}),r(a),h(()=>w(_,t(i))),y(o,a)}),r(G),r(C),r(N);var J=f(N,2),k=s(J);k.__click=E;var vt=s(k);At(vt,{}),r(k),r(J),r(z),h(()=>{w(dt,`Task Summary for CW ${t(e)??""}`),K(b,"style",`visibility: ${(t(e)==1?"hidden":"visble")??""}`),K(k,"style",`visibility: ${(t(e)==t(R)?"hidden":"visble")??""}`)}),y(v,Y),X()}$t(["click"]);function le(v,c){U(c,!0);var e=_t(),n=V(e);xt(n,()=>Ot.isLoaded(),null,(d,p)=>{zt(d,{})},(d,p)=>{Dt(d,{})}),y(v,e),X()}export{le as component,de as universal};
