import"../chunks/Bg9kRutz.js";import{p as Ft,a1 as ee,k as t,D as A,i as ae,f as rt,s,c as o,r as a,j as oe,t as P,a as Et}from"../chunks/Dk-3uZ7-.js";import{t as j,a as k,c as Mt}from"../chunks/MEy6nb--.js";import{Q as Tt,h as K,g as Z,j as re,n as se,D as C,y as wt,T as v,k as Dt,P as Ot,o as ne,a as ie}from"../chunks/BMnGVck3.js";import{R as le}from"../chunks/BbOvI8bH.js";import{a as At}from"../chunks/B8yHVH6i.js";import{a as tt,o as de,c as ce,s as et}from"../chunks/C2_p6BS0.js";import{s as b}from"../chunks/HYwG6HKy.js";import{i as $t}from"../chunks/ClpcCWp1.js";import{s as D}from"../chunks/70hiQGY9.js";import{s as me}from"../chunks/IvFCNWTJ.js";import{d as pe}from"../chunks/Cid6_tu6.js";import{p as N}from"../chunks/BaFDXL54.js";import{p as R}from"../chunks/Dun5Ui9Q.js";import{g as $}from"../chunks/DfyImgjG.js";import{N as be}from"../chunks/B4aj8M0P.js";import{T as ve,Q as ue}from"../chunks/EgXXQFQo.js";import{A as fe,a as he}from"../chunks/LB1AoE_X.js";import{D as ge,_ as _e}from"../chunks/yn5JrAs_.js";import{X as ye}from"../chunks/CSHQI80t.js";import{N as at}from"../chunks/B7_egR5Y.js";import{P as xe}from"../chunks/CVFzd7XU.js";import{T as ke}from"../chunks/Bzc80AB_.js";import{T as Te}from"../chunks/CmRE5a5A.js";import{i as St,N as ot}from"../chunks/CWQrkWAU.js";const we=!1,ra=Object.freeze(Object.defineProperty({__proto__:null,prerender:we},Symbol.toStringTag,{value:"Module"}));function De(I,T,i,h,c){const g=document.getElementById("inputStart"),w=document.getElementById("inputEnd");if(!g.reportValidity()||!w.reportValidity())return;const S=g.value,m=w.value,F=v.new(t(T),S,m,t(i),!1);try{v.validate(F)}catch(Q){t(h)("Entry could not be created!",Q.message,"text-bg-danger");return}t(c).timesheet.push(F),v.sortTimesheet(t(c).timesheet),ge.modified(t(c)),console.log(F),Ot.modified(),t(h)("Created entry",t(T),"text-bg-success")}function $e(){$("/app/track")}var Se=j('<tr><th scope="row"> </th><td> </td><td> </td><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td><td><div class="d-flex"><button type="button" class="btn btn-sm d-flex align-items-center"><!></button> <button type="button" class="btn btn-sm d-flex align-items-center"><!></button></div></td></tr>'),Fe=j('<div class="progress" role="progressbar"><div data-bs-toggle="tooltip" data-bs-placement="bottom"> </div></div>'),Ee=j('<tr><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td></tr>'),Me=j('<button type="button" class="btn btn-outline-secondary">Switch to Tracking</button>'),Oe=j('<!> <div class="container mt-3 mb-3"><h1 class="mt-3 mb-3"> </h1> <ul class="nav nav-tabs" id="myTab" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="editor-tab" data-bs-toggle="tab" data-bs-target="#editor-tab-pane" type="button" role="tab">Editor</button></li> <li class="nav-item" role="presentation"><button class="nav-link" id="statistics-tab" data-bs-toggle="tab" data-bs-target="#statistics-tab-pane" type="button" role="tab">Statistics</button></li></ul> <div class="tab-content mb-5"><div class="tab-pane show active" id="editor-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Total time</h3> <input type="text" class="form-control" disabled> <h3 class="mt-5 mb-3">All entries</h3> <table class="table"><thead><tr><th scope="col">#</th><th scope="col">Task</th><th scope="col">Start</th><th scope="col">End</th><th scope="col">Duration</th><th scope="col">Location</th><th scope="col">Action</th></tr></thead><tbody></tbody></table> <h3 class="mt-5 mb-3">Insert new entry</h3> <!> <form novalidate=""><div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label">Start</label> <div class="col-sm-2"><input type="time" id="inputStart" class="form-control"></div></div></form> <div class="row g-2 mb-3"><label for="inputEnd" class="col-sm-3 col-form-label">End</label> <div class="col-sm-2"><input type="time" id="inputEnd" class="form-control"></div></div> <!> <div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label"></label> <div class="col-sm-5"><button type="button" class="btn btn-secondary">Add Entry</button></div></div></div> <div class="tab-pane" id="statistics-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Task distrubiton</h3> <div class="progress-stacked mb-3 border" style="height: 50px"><!></div> <h3 class="mt-5 mb-3">Task summary</h3> <table class="table"><thead><tr><th scope="col">Task</th><th scope="col">Duration</th><th scope="col">Share</th></tr></thead><tbody></tbody></table></div></div> <div class="d-flex justify-content-between"><button type="button" class="btn btn-outline-secondary"><!> <span style="vertical-align: middle;">Previous</span></button> <!> <button type="button" class="btn btn-outline-secondary"><span style="vertical-align: middle;">Next</span> <!></button></div></div> <!>',1);function Ae(I,T){Ft(T,!0);const i=A(()=>new Date(wt.rune.yearLiteral,R.params.month,R.params.day)),h=["text-bg-primary","text-bg-success","text-bg-danger","text-bg-warning","text-bg-info","text-bg-light","text-bg-dark"];let c=A(()=>wt.getDay(t(i))),g=tt(N(At.rune.atHome?Tt.Home:Tt.Office)),w=tt(N(K.rune[0].name)),S=tt(void 0),m=A(()=>v.aggregateDurations(t(c).timesheet)),F=A(()=>{let e=0;for(const r of t(c).timesheet)e+=v.duration(r);return e});ee(async()=>{t(m),await ae(),Te.enable(),console.log("Enable tooltips")});function Q(){$(`/app/year/${R.params.month}#${t(i).getDate()}`)}function Nt(e){console.log("Remove:",e),t(c).timesheet=t(c).timesheet.filter((r,n)=>n!=e),Ot.modified()}function jt(e){$(`/app/year/${R.params.month}/${t(i).getDate()}/timesheet/${e}`)}function W(){return Object.values(t(m)).reduce((e,r)=>e+r,0)}function st(){let e=Dt(t(i),-1);$(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function nt(){let e=Dt(t(i),1);$(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function It(){const e=ne(t(i),{weekStartsOn:1,firstWeekContainsDate:4});$(`/app/year/week/${e}`)}function Lt(e){const r=K.rune.find(l=>l.name==e);let n="";return r!==void 0&&r.color!=="#FFFFFF"&&(n+=`color: ${_e(r.color)};`,n+=`background-color: ${r.color};`),n}function Ht(e,r){const n=K.rune.find(d=>d.name==e);let l="";return(n===void 0||n.color.toUpperCase()==="#FFFFFF")&&(l=`${h[r%h.length]}`),l}function it(e){e.key=="ArrowLeft"&&!C.isFirstDayOfYear(t(i))?st():e.key=="ArrowRight"&&!C.isLastDayOfYear(t(i))&&nt()}de(()=>{window.addEventListener("keydown",it)}),ce(()=>{window.removeEventListener("keydown",it)});var lt=Oe(),dt=rt(lt);const Pt=A(()=>[at.HomeItem(),at.Item("Days",Q),at.Item("Week-Report",It)]);be(dt,{name:"Timesheet",get navItems(){return t(Pt)}});var Y=s(dt,2),B=o(Y),Ct=o(B);a(B);var V=s(B,4),X=o(V),ct=s(o(X),2),q=s(ct,4),mt=s(o(q));Z(mt,23,()=>t(c).timesheet,e=>e.id,(e,r,n)=>{var l=Se(),d=o(l),_=o(d,!0);a(d);var p=s(d),u=o(p,!0);a(p);var f=s(p),M=o(f,!0);a(f);var y=s(f),O=o(y,!0);a(y);var x=s(y),U=o(x),qt=o(U,!0);a(U),a(x);var G=s(x),zt=o(G,!0);a(G);var xt=s(G),kt=o(xt),H=o(kt);H.__click=()=>{jt(t(n))};var Ut=o(H);xe(Ut,{}),a(H);var J=s(H,2);J.__click=()=>{Nt(t(n))};var Gt=o(J);ye(Gt,{colorStyle:"text-danger"}),a(J),a(kt),a(xt),a(l),P((Jt,Kt,Zt,te)=>{b(_,t(n)+1),b(u,t(r).taskName),b(M,Jt),b(O,Kt),D(U,"data-bs-title",`${Zt??""} h`),b(qt,te),b(zt,t(r).quotaType)},[()=>v.formatTimespamp(t(r).start),()=>v.formatTimespamp(t(r).end),()=>v.formatDecimalTime(v.duration(t(r))),()=>ot.toFixed(Math.round(v.duration(t(r))*1e4)/1e4,3)]),k(e,l)}),a(mt),a(q);var pt=s(q,4);ve(pt,{get selected(){return t(w)},set selected(e){et(w,N(e))}});var bt=s(pt,6);ue(bt,{get selected(){return t(g)},set selected(e){et(g,N(e))}});var vt=s(bt,2),ut=s(o(vt),2),Rt=o(ut);Rt.__click=[De,w,g,S,c],a(ut),a(vt),a(X);var ft=s(X,2),z=s(o(ft),2),Qt=o(z);{var Wt=e=>{var r=Mt(),n=rt(r);Z(n,18,()=>Object.keys(t(m)).sort(),l=>l,(l,d,_)=>{var p=Fe(),u=o(p),f=o(u,!0);a(u),a(p),P((M,y,O,x)=>{D(p,"style",`width: ${M??""}%; height: 50px;`),me(u,1,`progress-bar ${y??""}`),D(u,"style",O),D(u,"data-bs-title",`${d??""}: ${x??""}%`),b(f,d)},[()=>t(m)[d]/W()*100,()=>Ht(d,t(_)),()=>Lt(d),()=>Math.round(t(m)[d]/W()*1e4)/100]),k(l,p)}),k(e,r)};$t(Qt,e=>{Object.keys(t(m)).length>0&&e(Wt)})}a(z);var ht=s(z,4),gt=s(o(ht));Z(gt,21,()=>Object.keys(t(m)).sort(),re,(e,r)=>{var n=Ee(),l=o(n),d=o(l,!0);a(l);var _=s(l),p=o(_),u=o(p,!0);a(p),a(_);var f=s(_),M=o(f);a(f),a(n),P((y,O,x)=>{b(d,t(r)),D(p,"data-bs-title",`${y??""} h`),b(u,O),b(M,`${x??""}%`)},[()=>v.formatDecimalTime(Math.round(t(m)[t(r)]*100)/100),()=>ot.toFixed(t(m)[t(r)],3),()=>Math.round(t(m)[t(r)]/W()*1e4)/100]),k(e,n)}),a(gt),a(ht),a(ft),a(V);var _t=s(V,2),E=o(_t);E.__click=st;var Yt=o(E);fe(Yt,{}),oe(2),a(E);var yt=s(E,2);{var Bt=e=>{var r=Me();r.__click=[$e],k(e,r)};$t(yt,e=>{St(t(i))&&e(Bt)})}var L=s(yt,2);L.__click=nt;var Vt=s(o(L),2);he(Vt,{}),a(L),a(_t),a(Y);var Xt=s(Y,2);ke(Xt,{get show(){return t(S)},set show(e){et(S,N(e))}}),P((e,r,n,l,d)=>{b(Ct,`Timesheet for ${e??""}${r??""}`),D(ct,"placeholder",n),E.disabled=l,L.disabled=d},[()=>se(t(i),"E dd MMMM yyyy"),()=>St(t(i))?" (Today)":"",()=>ot.toFixed(t(F),3),()=>C.isFirstDayOfYear(t(i)),()=>C.isLastDayOfYear(t(i))]),k(I,lt),Et()}pe(["click"]);function sa(I,T){Ft(T,!0);var i=Mt(),h=rt(i);ie(h,()=>At.isLoaded(),null,(c,g)=>{Ae(c,{})},c=>{le(c,{})}),k(I,i),Et()}export{sa as component,ra as universal};
