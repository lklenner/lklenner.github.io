import"../chunks/Bg9kRutz.js";import{t as D,p as wt,au as Ut,k as t,A as z,i as Gt,f as J,s as i,c as r,r as a,j as Jt,a as Tt}from"../chunks/B_fWjAJn.js";import{n as K,a as y,t as j,c as kt}from"../chunks/CGZ7VXBK.js";import{Q as Kt,h as Y,c as U,i as G,k as Wt,D as ut,y as ht,T as _,P as $t,n as Dt,g as Zt,R as te}from"../chunks/D5QCgc3m.js";import{a as ee}from"../chunks/DsUiww_e.js";import{a as gt,s as ft}from"../chunks/-5UQ7fw5.js";import{s as f}from"../chunks/DuGrHTQZ.js";import{p as W,i as _t}from"../chunks/BKxV5vi2.js";import{s as u}from"../chunks/Ct4An_w0.js";import{s as ae}from"../chunks/99q-nmkb.js";import{d as oe}from"../chunks/dYPrhcUL.js";import{p as O}from"../chunks/BqFMnoIm.js";import{p as H}from"../chunks/GTDpmCPW.js";import{g as L}from"../chunks/BSzaa-A5.js";import{N as re}from"../chunks/uvoJunv6.js";import{T as se,Q as ie}from"../chunks/DaPZswri.js";import{_ as ne}from"../chunks/D1FUJGbv.js";import{X as le}from"../chunks/DlWW5722.js";import{N as yt}from"../chunks/5xEhE_IQ.js";import{i as xt}from"../chunks/Cn69FflW.js";const de=!1,Xe=Object.freeze(Object.defineProperty({__proto__:null,prerender:de},Symbol.toStringTag,{value:"Module"}));var ce=K('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"></path></svg>');function ve(p,c){let s=W(c,"size",3,16);var l=ce();D(()=>{u(l,"width",s()),u(l,"height",s())}),y(p,l)}var me=K('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"></path></svg>');function pe(p,c){let s=W(c,"size",3,16);var l=me();D(()=>{u(l,"width",s()),u(l,"height",s())}),y(p,l)}var be=K('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16"><path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"></path></svg>');function ue(p,c){let s=W(c,"size",3,16);var l=be();D(()=>{u(l,"width",s()),u(l,"height",s())}),y(p,l)}function he(p,c,s,l){const v=document.getElementById("inputStart"),w=document.getElementById("inputEnd");if(!v.reportValidity()||!w.reportValidity())return;const M=v.value,b=w.value,F=_.new(t(c),M,b,t(s),!1);try{_.validate(F)}catch{return}t(l).timesheet.push(F),console.log(F),$t.modified()}function ge(p,c){let s=Dt(t(c),-1);L(`/app/year/${s.getMonth()}/${s.getDate()}/timesheet`)}function fe(p,c){let s=Dt(t(c),1);L(`/app/year/${s.getMonth()}/${s.getDate()}/timesheet`)}function _e(){L("/app/track")}var ye=j('<tr><th scope="row"></th><td> </td><td> </td><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td><td><div class="d-flex"><button type="button" class="btn btn-sm d-flex align-items-center"><!></button> <button type="button" class="btn btn-sm d-flex align-items-center"><!></button></div></td></tr>'),xe=j('<div class="progress" role="progressbar"><div data-bs-toggle="tooltip" data-bs-placement="bottom"> </div></div>'),we=j('<tr><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td></tr>'),Te=j('<button type="button" class="btn btn-outline-secondary">Switch to Tracking</button>'),ke=j('<!> <div class="container mt-3 mb-3"><h1 class="mt-3 mb-3"> </h1> <ul class="nav nav-tabs" id="myTab" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="editor-tab" data-bs-toggle="tab" data-bs-target="#editor-tab-pane" type="button" role="tab">Editor</button></li> <li class="nav-item" role="presentation"><button class="nav-link" id="statistics-tab" data-bs-toggle="tab" data-bs-target="#statistics-tab-pane" type="button" role="tab">Statistics</button></li></ul> <div class="tab-content mb-5"><div class="tab-pane show active" id="editor-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Total time</h3> <input type="text" class="form-control" disabled> <h3 class="mt-5 mb-3">All entries</h3> <table class="table"><thead><tr><th scope="col">#</th><th scope="col">Task</th><th scope="col">Start</th><th scope="col">End</th><th scope="col">Duration</th><th scope="col">Location</th><th scope="col">Action</th></tr></thead><tbody></tbody></table> <h3 class="mt-5 mb-3">Insert new entry</h3> <!> <form novalidate=""><div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label">Start</label> <div class="col-sm-2"><input type="time" id="inputStart" class="form-control"></div></div></form> <div class="row g-2 mb-3"><label for="inputEnd" class="col-sm-3 col-form-label">End</label> <div class="col-sm-2"><input type="time" id="inputEnd" class="form-control"></div></div> <!> <div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label"></label> <div class="col-sm-5"><button type="button" class="btn btn-secondary">Add Entry</button></div></div></div> <div class="tab-pane" id="statistics-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Task distrubiton</h3> <div class="progress-stacked mb-3 border" style="height: 50px"><!></div> <h3 class="mt-5 mb-3">Task summary</h3> <table class="table"><thead><tr><th scope="col">Task</th><th scope="col">Duration</th><th scope="col">Share</th></tr></thead><tbody></tbody></table></div></div> <div class="d-flex justify-content-between"><button type="button" class="btn btn-outline-secondary"><!> <span style="vertical-align: middle;">Previous</span></button> <!> <button type="button" class="btn btn-outline-secondary"><span style="vertical-align: middle;">Next</span> <!></button></div></div>',1);function $e(p,c){wt(c,!0);const s=z(()=>new Date(ht.rune.yearLiteral,H.params.month,H.params.day)),l=["text-bg-primary","text-bg-success","text-bg-danger","text-bg-warning","text-bg-info","text-bg-light","text-bg-dark"];let v=z(()=>ht.getDay(t(s))),w=gt(O(Kt.Home)),M=gt(O(Y.rune[0].name)),b=z(()=>_.aggregateDurations(t(v).timesheet)),F=z(()=>{let o=0;for(const e of t(v).timesheet)o+=_.duration(e);return o});Ut(async()=>{t(b),await Gt(),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(e=>new bootstrap.Tooltip(e)),console.log("Enable tooltips")});function St(){L(`/app/year/${H.params.month}#${t(s).getDate()}`)}function Mt(o){console.log("Remove:",o),t(v).timesheet=t(v).timesheet.filter((e,n)=>n!=o),$t.modified()}function Ft(o){L(`/app/year/${H.params.month}/${t(s).getDate()}/timesheet/${o}`)}function I(){return Object.values(t(b)).reduce((o,e)=>o+e,0)}function Et(o){const e=Y.rune.find(d=>d.name==o);let n="";return e!==void 0&&e.color!=="#FFFFFF"&&(n+=`color: ${ne(e.color)};`,n+=`background-color: ${e.color};`),n}function At(o,e){const n=Y.rune.find(m=>m.name==o);let d="";return(n===void 0||n.color.toUpperCase()==="#FFFFFF")&&(d=`${l[e%l.length]}`),d}var Z=ke(),tt=J(Z);const zt=z(()=>[yt.HomeItem(),yt.Item("Days",St)]);re(tt,{name:"Timesheet",get navItems(){return t(zt)}});var et=i(tt,2),B=r(et),Lt=r(B);a(B);var P=i(B,4),Q=r(P),at=i(r(Q),2),V=i(at,4),ot=i(r(V));U(ot,21,()=>t(v).timesheet,G,(o,e,n)=>{var d=ye(),m=r(d);m.textContent=n+1;var x=i(m),g=r(x,!0);a(x);var h=i(x),S=r(h,!0);a(h);var T=i(h),A=r(T,!0);a(T);var k=i(T),$=r(k),Bt=r($,!0);a($),a(k);var q=i(k),Pt=r(q,!0);a(q);var pt=i(q),bt=r(pt),N=r(bt);N.__click=()=>{Ft(n)};var Qt=r(N);ue(Qt,{}),a(N);var X=i(N,2);X.__click=()=>{Mt(n)};var Vt=r(X);le(Vt,{colorStyle:"text-danger"}),a(X),a(bt),a(pt),a(d),D((Rt,qt,Xt,Yt)=>{f(g,t(e).taskName),f(S,Rt),f(A,qt),u($,"data-bs-title",`${Xt??""} h`),f(Bt,Yt),f(Pt,t(e).quotaType)},[()=>_.formatTimespamp(t(e).start),()=>_.formatTimespamp(t(e).end),()=>_.formatDecimalTime(_.duration(t(e))),()=>Math.round(_.duration(t(e))*1e4)/1e4]),y(o,d)}),a(ot),a(V);var rt=i(V,4);se(rt,{get selected(){return t(M)},set selected(o){ft(M,O(o))}});var st=i(rt,6);ie(st,{get selected(){return t(w)},set selected(o){ft(w,O(o))}});var it=i(st,2),nt=i(r(it),2),jt=r(nt);jt.__click=[he,M,w,v],a(nt),a(it),a(Q);var lt=i(Q,2),R=i(r(lt),2),Ct=r(R);{var Nt=o=>{var e=kt(),n=J(e);U(n,17,()=>Object.keys(t(b)).sort(),G,(d,m,x)=>{var g=xe(),h=r(g),S=r(h,!0);a(h),a(g),D((T,A,k,$)=>{u(g,"style",`width: ${T??""}%; height: 50px;`),ae(h,1,`progress-bar ${A??""}`),u(h,"style",k),u(h,"data-bs-title",`${t(m)??""}: ${$??""}%`),f(S,t(m))},[()=>t(b)[t(m)]/I()*100,()=>At(t(m),x),()=>Et(t(m)),()=>Math.round(t(b)[t(m)]/I()*1e4)/100]),y(d,g)}),y(o,e)};_t(Ct,o=>{Object.keys(t(b)).length>0&&o(Nt)})}a(R);var dt=i(R,4),ct=i(r(dt));U(ct,21,()=>Object.keys(t(b)).sort(),G,(o,e)=>{var n=we(),d=r(n),m=r(d,!0);a(d);var x=i(d),g=r(x),h=r(g,!0);a(g),a(x);var S=i(x),T=r(S);a(S),a(n),D((A,k,$)=>{f(m,t(e)),u(g,"data-bs-title",`${A??""} h`),f(h,k),f(T,`${$??""}%`)},[()=>_.formatDecimalTime(Math.round(t(b)[t(e)]*100)/100),()=>Math.round(t(b)[t(e)]*100)/100,()=>Math.round(t(b)[t(e)]/I()*1e4)/100]),y(o,n)}),a(ct),a(dt),a(lt),a(P);var vt=i(P,2),E=r(vt);E.__click=[ge,s];var Ot=r(E);ve(Ot,{}),Jt(2),a(E);var mt=i(E,2);{var Ht=o=>{var e=Te();e.__click=[_e],y(o,e)};_t(mt,o=>{xt(t(s))&&o(Ht)})}var C=i(mt,2);C.__click=[fe,s];var It=i(r(C),2);pe(It,{}),a(C),a(vt),a(et),D((o,e,n,d)=>{f(Lt,`Timesheet for ${o??""}${e??""}`),u(at,"placeholder",t(F)),E.disabled=n,C.disabled=d},[()=>Wt(t(s),"E dd MMMM yyyy"),()=>xt(t(s))?" (Today)":"",()=>ut.isFirstDayOfYear(t(s)),()=>ut.isLastDayOfYear(t(s))]),y(p,Z),Tt()}oe(["click"]);function Ye(p,c){wt(c,!0);var s=kt(),l=J(s);Zt(l,()=>ee.isLoaded(),null,(v,w)=>{$e(v,{})},v=>{te(v,{})}),y(p,s),Tt()}export{Ye as component,Xe as universal};
