import"../chunks/Bg9kRutz.js";import{t as j,p as St,av as Zt,k as t,A as O,i as te,f as rt,s,c as o,r as a,j as ee,a as Ft}from"../chunks/DVl1eqIf.js";import{n as ae,a as _,t as I,c as Mt}from"../chunks/BbopcKfd.js";import{Q as oe,h as K,g as Z,i as re,k as se,D as H,y as wt,T as u,l as Tt,P as Et,o as ne,f as ie}from"../chunks/D2fgoS12.js";import{R as le}from"../chunks/Bl11XcEa.js";import{a as de}from"../chunks/DX14NvuP.js";import{a as tt,o as ce,c as me,s as et}from"../chunks/C_sUaDGO.js";import{s as b}from"../chunks/UmDqWYja.js";import{p as pe,i as Dt}from"../chunks/CPODWPa_.js";import{s as y}from"../chunks/BtJF9F5H.js";import{s as ve}from"../chunks/9FSUsWcs.js";import{d as be}from"../chunks/3pJTpWBv.js";import{p as L}from"../chunks/9TXrOhxM.js";import{p as P}from"../chunks/CL4UDxET.js";import{g as S}from"../chunks/wh67sqn1.js";import{N as ue}from"../chunks/BEVJxiaB.js";import{T as fe,Q as he}from"../chunks/DGWYVJ1A.js";import{A as ge,a as _e}from"../chunks/Bl7qf6W1.js";import{_ as ye}from"../chunks/Cqkky4hu.js";import{X as xe}from"../chunks/Be7m_nQ8.js";import{N as at}from"../chunks/C4_C0P6T.js";import{T as ke}from"../chunks/T2l36TAZ.js";import{T as we}from"../chunks/CmRE5a5A.js";import{i as $t,N as ot}from"../chunks/DlVJgWwC.js";const Te=!1,sa=Object.freeze(Object.defineProperty({__proto__:null,prerender:Te},Symbol.toStringTag,{value:"Module"}));var De=ae('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16"><path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"></path></svg>');function $e(D,h){let n=pe(h,"size",3,16);var v=De();j(()=>{y(v,"width",n()),y(v,"height",n())}),_(D,v)}function Se(D,h,n,v,c){const x=document.getElementById("inputStart"),$=document.getElementById("inputEnd");if(!x.reportValidity()||!$.reportValidity())return;const F=x.value,m=$.value,M=u.new(t(h),F,m,t(n),!1);try{u.validate(M)}catch(R){t(v)("Entry could not be created!",R.message,"text-bg-danger");return}t(c).timesheet.push(M),console.log(M),Et.modified(),t(v)("Created entry",t(h),"text-bg-success")}function Fe(){S("/app/track")}var Me=I('<tr><th scope="row"> </th><td> </td><td> </td><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td><td><div class="d-flex"><button type="button" class="btn btn-sm d-flex align-items-center"><!></button> <button type="button" class="btn btn-sm d-flex align-items-center"><!></button></div></td></tr>'),Ee=I('<div class="progress" role="progressbar"><div data-bs-toggle="tooltip" data-bs-placement="bottom"> </div></div>'),Ae=I('<tr><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td></tr>'),Ne=I('<button type="button" class="btn btn-outline-secondary">Switch to Tracking</button>'),Oe=I('<!> <div class="container mt-3 mb-3"><h1 class="mt-3 mb-3"> </h1> <ul class="nav nav-tabs" id="myTab" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="editor-tab" data-bs-toggle="tab" data-bs-target="#editor-tab-pane" type="button" role="tab">Editor</button></li> <li class="nav-item" role="presentation"><button class="nav-link" id="statistics-tab" data-bs-toggle="tab" data-bs-target="#statistics-tab-pane" type="button" role="tab">Statistics</button></li></ul> <div class="tab-content mb-5"><div class="tab-pane show active" id="editor-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Total time</h3> <input type="text" class="form-control" disabled> <h3 class="mt-5 mb-3">All entries</h3> <table class="table"><thead><tr><th scope="col">#</th><th scope="col">Task</th><th scope="col">Start</th><th scope="col">End</th><th scope="col">Duration</th><th scope="col">Location</th><th scope="col">Action</th></tr></thead><tbody></tbody></table> <h3 class="mt-5 mb-3">Insert new entry</h3> <!> <form novalidate=""><div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label">Start</label> <div class="col-sm-2"><input type="time" id="inputStart" class="form-control"></div></div></form> <div class="row g-2 mb-3"><label for="inputEnd" class="col-sm-3 col-form-label">End</label> <div class="col-sm-2"><input type="time" id="inputEnd" class="form-control"></div></div> <!> <div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label"></label> <div class="col-sm-5"><button type="button" class="btn btn-secondary">Add Entry</button></div></div></div> <div class="tab-pane" id="statistics-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Task distrubiton</h3> <div class="progress-stacked mb-3 border" style="height: 50px"><!></div> <h3 class="mt-5 mb-3">Task summary</h3> <table class="table"><thead><tr><th scope="col">Task</th><th scope="col">Duration</th><th scope="col">Share</th></tr></thead><tbody></tbody></table></div></div> <div class="d-flex justify-content-between"><button type="button" class="btn btn-outline-secondary"><!> <span style="vertical-align: middle;">Previous</span></button> <!> <button type="button" class="btn btn-outline-secondary"><span style="vertical-align: middle;">Next</span> <!></button></div></div> <!>',1);function Le(D,h){St(h,!0);const n=O(()=>new Date(wt.rune.yearLiteral,P.params.month,P.params.day)),v=["text-bg-primary","text-bg-success","text-bg-danger","text-bg-warning","text-bg-info","text-bg-light","text-bg-dark"];let c=O(()=>wt.getDay(t(n))),x=tt(L(oe.Home)),$=tt(L(K.rune[0].name)),F=tt(void 0),m=O(()=>u.aggregateDurations(t(c).timesheet)),M=O(()=>{let e=0;for(const r of t(c).timesheet)e+=u.duration(r);return e});Zt(async()=>{t(m),await te(),we.enable(),console.log("Enable tooltips")});function R(){S(`/app/year/${P.params.month}#${t(n).getDate()}`)}function At(e){console.log("Remove:",e),t(c).timesheet=t(c).timesheet.filter((r,i)=>i!=e),Et.modified()}function Nt(e){S(`/app/year/${P.params.month}/${t(n).getDate()}/timesheet/${e}`)}function Q(){return Object.values(t(m)).reduce((e,r)=>e+r,0)}function st(){let e=Tt(t(n),-1);S(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function nt(){let e=Tt(t(n),1);S(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function Ot(){const e=ne(t(n),{weekStartsOn:1,firstWeekContainsDate:4});S(`/app/year/week/${e}`)}function Lt(e){const r=K.rune.find(l=>l.name==e);let i="";return r!==void 0&&r.color!=="#FFFFFF"&&(i+=`color: ${ye(r.color)};`,i+=`background-color: ${r.color};`),i}function jt(e,r){const i=K.rune.find(d=>d.name==e);let l="";return(i===void 0||i.color.toUpperCase()==="#FFFFFF")&&(l=`${v[r%v.length]}`),l}function it(e){e.key=="ArrowLeft"&&!H.isFirstDayOfYear(t(n))?st():e.key=="ArrowRight"&&!H.isLastDayOfYear(t(n))&&nt()}ce(()=>{window.addEventListener("keydown",it)}),me(()=>{window.removeEventListener("keydown",it)});var lt=Oe(),dt=rt(lt);const It=O(()=>[at.HomeItem(),at.Item("Days",R),at.Item("Week Report",Ot)]);ue(dt,{name:"Timesheet",get navItems(){return t(It)}});var V=s(dt,2),B=o(V),Ct=o(B);a(B);var W=s(B,4),Y=o(W),ct=s(o(Y),2),X=s(ct,4),mt=s(o(X));Z(mt,23,()=>t(c).timesheet,e=>e.taskName,(e,r,i)=>{var l=Me(),d=o(l),k=o(d,!0);a(d);var p=s(d),f=o(p,!0);a(p);var g=s(p),A=o(g,!0);a(g);var w=s(g),N=o(w,!0);a(w);var T=s(w),U=o(T),Wt=o(U,!0);a(U),a(T);var G=s(T),Yt=o(G,!0);a(G);var xt=s(G),kt=o(xt),z=o(kt);z.__click=()=>{Nt(t(i))};var Xt=o(z);$e(Xt,{}),a(z);var J=s(z,2);J.__click=()=>{At(t(i))};var qt=o(J);xe(qt,{colorStyle:"text-danger"}),a(J),a(kt),a(xt),a(l),j((Ut,Gt,Jt,Kt)=>{b(k,t(i)+1),b(f,t(r).taskName),b(A,Ut),b(N,Gt),y(U,"data-bs-title",`${Jt??""} h`),b(Wt,Kt),b(Yt,t(r).quotaType)},[()=>u.formatTimespamp(t(r).start),()=>u.formatTimespamp(t(r).end),()=>u.formatDecimalTime(u.duration(t(r))),()=>ot.toFixed(Math.round(u.duration(t(r))*1e4)/1e4,3)]),_(e,l)}),a(mt),a(X);var pt=s(X,4);fe(pt,{get selected(){return t($)},set selected(e){et($,L(e))}});var vt=s(pt,6);he(vt,{get selected(){return t(x)},set selected(e){et(x,L(e))}});var bt=s(vt,2),ut=s(o(bt),2),zt=o(ut);zt.__click=[Se,$,x,F,c],a(ut),a(bt),a(Y);var ft=s(Y,2),q=s(o(ft),2),Ht=o(q);{var Pt=e=>{var r=Mt(),i=rt(r);Z(i,18,()=>Object.keys(t(m)).sort(),l=>l,(l,d,k)=>{var p=Ee(),f=o(p),g=o(f,!0);a(f),a(p),j((A,w,N,T)=>{y(p,"style",`width: ${A??""}%; height: 50px;`),ve(f,1,`progress-bar ${w??""}`),y(f,"style",N),y(f,"data-bs-title",`${d??""}: ${T??""}%`),b(g,d)},[()=>t(m)[d]/Q()*100,()=>jt(d,t(k)),()=>Lt(d),()=>Math.round(t(m)[d]/Q()*1e4)/100]),_(l,p)}),_(e,r)};Dt(Ht,e=>{Object.keys(t(m)).length>0&&e(Pt)})}a(q);var ht=s(q,4),gt=s(o(ht));Z(gt,21,()=>Object.keys(t(m)).sort(),re,(e,r)=>{var i=Ae(),l=o(i),d=o(l,!0);a(l);var k=s(l),p=o(k),f=o(p,!0);a(p),a(k);var g=s(k),A=o(g);a(g),a(i),j((w,N,T)=>{b(d,t(r)),y(p,"data-bs-title",`${w??""} h`),b(f,N),b(A,`${T??""}%`)},[()=>u.formatDecimalTime(Math.round(t(m)[t(r)]*100)/100),()=>ot.toFixed(t(m)[t(r)],3),()=>Math.round(t(m)[t(r)]/Q()*1e4)/100]),_(e,i)}),a(gt),a(ht),a(ft),a(W);var _t=s(W,2),E=o(_t);E.__click=st;var Rt=o(E);ge(Rt,{}),ee(2),a(E);var yt=s(E,2);{var Qt=e=>{var r=Ne();r.__click=[Fe],_(e,r)};Dt(yt,e=>{$t(t(n))&&e(Qt)})}var C=s(yt,2);C.__click=nt;var Vt=s(o(C),2);_e(Vt,{}),a(C),a(_t),a(V);var Bt=s(V,2);ke(Bt,{get show(){return t(F)},set show(e){et(F,L(e))}}),j((e,r,i,l,d)=>{b(Ct,`Timesheet for ${e??""}${r??""}`),y(ct,"placeholder",i),E.disabled=l,C.disabled=d},[()=>se(t(n),"E dd MMMM yyyy"),()=>$t(t(n))?" (Today)":"",()=>ot.toFixed(t(M),3),()=>H.isFirstDayOfYear(t(n)),()=>H.isLastDayOfYear(t(n))]),_(D,lt),Ft()}be(["click"]);function na(D,h){St(h,!0);var n=Mt(),v=rt(n);ie(v,()=>de.isLoaded(),null,(c,x)=>{Le(c,{})},c=>{le(c,{})}),_(D,n),Ft()}export{na as component,sa as universal};
