import"../chunks/Bg9kRutz.js";import{p as tt,f as et,k as t,A as m,s as v,c as r,r as o,t as b,a as at}from"../chunks/B_fWjAJn.js";import{t as w,a as g,c as ht}from"../chunks/CGZ7VXBK.js";import{t as rt,q as wt,r as xt,y as k,g as S,k as $,a as Dt,u as Ot,T as V,n as St,f as $t}from"../chunks/CKOL1kF-.js";import{R as Nt}from"../chunks/FeMUJciz.js";import{a as Tt}from"../chunks/DmNFN6rQ.js";import{s as h}from"../chunks/DuGrHTQZ.js";import{s as X}from"../chunks/Ct4An_w0.js";import{s as Wt}from"../chunks/99q-nmkb.js";import{d as Lt}from"../chunks/dYPrhcUL.js";import{o as Mt,c as At}from"../chunks/CRjo6MhA.js";import{p as I}from"../chunks/CISbPZR0.js";import{N as It}from"../chunks/BxBvW2vs.js";import{N as Z}from"../chunks/DvP_yRwV.js";import{g as N}from"../chunks/Bim0RSIV.js";import{A as Bt,a as Ft}from"../chunks/DlkemsOt.js";import{g as Rt}from"../chunks/BP8-zE_w.js";import{g as jt}from"../chunks/BOSXmbD7.js";function Et(f,d){const s=d==null?void 0:d.weekStartsOn,i=rt(f),l=i.getDay(),_=(l<s?-7:0)+6-(l-s);return i.setDate(i.getDate()+_),i.setHours(23,59,59,999),i}function Yt(f,d,s){const i=rt(f),l=wt(i,s)-d;return i.setDate(i.getDate()-l*7),i}const Ht=!1,pe=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ht},Symbol.toStringTag,{value:"Module"}));var qt=(f,d,s)=>d(t(s)),zt=w('<th scope="col"> </th>'),Ct=w("<td> </td>"),Pt=w("<tr><td> </td><!></tr>"),Gt=w('<td class="pt-5"><i> </i></td>'),Jt=w('<!> <div class="container mt-3"><h1> </h1></div> <div class="d-flex mt-3 mb-3"><div class="d-flex m-4 align-items-center"><button class="btn btn-outline-secondary py-4 d-flex align-items-center"><!></button></div> <div class="container"><table class="table"><thead><tr><th scope="col">Task</th><!></tr></thead><tbody><!><tr><td class="pt-5"><span>&Sigma;</span></td><!></tr></tbody></table></div> <div class="d-flex m-4 align-items-center"><button class="btn btn-outline-secondary py-4 d-flex align-items-center"><!></button></div></div>',1);function Kt(f,d){tt(d,!0),console.log(I.params.week);const s=m(()=>Number(I.params.week)),i=xt(new Date(k.rune.yearLiteral,0)),l=m(()=>Yt(i,I.params.week)),_=m(()=>Ot(t(l),{weekStartsOn:1})),ot=m(()=>Et(t(_),{weekStartsOn:1})),st=m(()=>jt(t(l))),x=m(()=>Dt({start:t(_),end:t(ot)})),B=m(()=>Rt(Number(k.rune.yearLiteral))),F=m(()=>it(t(x))),nt=m(()=>t(F)[0]),R=m(()=>t(F)[1]);function it(e){const n=new Set,a=[];for(const c of e){const p=k.getDay(c),u=V.aggregateDurations(p.timesheet);Object.keys(u).forEach(y=>{n.add(y)}),a.push(u)}return[Array.from(n).sort(),a]}function ct(e,n){const a=t(R)[n];return e in a?a[e].toFixed(2):0}function dt(e){const n=t(R)[e];return V.getTotalDuration(n).toFixed(2)}function lt(){N(`/app/year/${t(st)}`)}function j(){N(`/app/year/week/${t(s)-1}`)}function E(){N(`/app/year/week/${t(s)+1}`)}function mt(e){const n=e.getDate(),a=e.getMonth(),c=e.getFullYear();Number(k.rune.yearLiteral)==c&&N(`/app/year/${a}/${n}/timesheet`)}function Y(e){e.key=="ArrowLeft"&&1<t(s)?j():e.key=="ArrowRight"&&t(s)<t(B)&&E()}Mt(()=>{window.addEventListener("keydown",Y)}),At(()=>{window.removeEventListener("keydown",Y)});var H=Jt(),q=et(H);const vt=m(()=>[Z.HomeItem(),Z.Item("Days",lt)]);It(q,{name:"Timesheet",get navItems(){return t(vt)}});var T=v(q,2),z=r(T),ft=r(z);o(z),o(T);var C=v(T,2),W=r(C),D=r(W);D.__click=j;var pt=r(D);Bt(pt,{}),o(D),o(W);var L=v(W,2),P=r(L),M=r(P),G=r(M),ut=v(r(G));S(ut,17,()=>t(x),$,(e,n)=>{var a=zt();a.__click=[qt,mt,n];var c=r(a,!0);o(a),b((p,u)=>{Wt(a,1,p,"svelte-s66s5j"),h(c,u)},[()=>Number(k.rune.yearLiteral)==t(n).getFullYear()?"clickable":"",()=>St(t(n),"dd.MM")]),g(e,a)}),o(G),o(M);var J=v(M),K=r(J);S(K,17,()=>t(nt),$,(e,n)=>{var a=Pt(),c=r(a),p=r(c,!0);o(c);var u=v(c);S(u,17,()=>t(x),$,(y,Qt,yt)=>{var A=Ct(),bt=r(A,!0);o(A),b(kt=>h(bt,kt),[()=>ct(t(n),yt)]),g(y,A)}),o(a),b(()=>h(p,t(n))),g(e,a)});var Q=v(K),_t=v(r(Q));S(_t,17,()=>t(x),$,(e,n,a)=>{var c=Gt(),p=r(c),u=r(p,!0);o(p),o(c),b(y=>h(u,y),[()=>dt(a)]),g(e,c)}),o(Q),o(J),o(P),o(L);var U=v(L,2),O=r(U);O.__click=E;var gt=r(O);Ft(gt,{}),o(O),o(U),o(C),b(()=>{h(ft,`Task Summary for CW ${t(s)??""}`),X(D,"style",`visibility: ${(t(s)==1?"hidden":"visble")??""}`),X(O,"style",`visibility: ${(t(s)==t(B)?"hidden":"visble")??""}`)}),g(f,H),at()}Lt(["click"]);function ue(f,d){tt(d,!0);var s=ht(),i=et(s);$t(i,()=>Tt.isLoaded(),null,(l,_)=>{Kt(l,{})},(l,_)=>{Nt(l,{})}),g(f,s),at()}export{ue as component,pe as universal};
