import"../chunks/Bg9kRutz.js";import{p as E,s as _,c as m,f as W,g as o,r as n,a as Y,t as M,b as oe,v as re}from"../chunks/BUjIT_Mk.js";import{t as k,c as Z,a as p}from"../chunks/B9kf_Ie_.js";import{o as ne,u as G,v as se,k as N,e as C,i as O,y as L,a as j,P,j as ie,s as le,h as J,w as de,x as ce,D as H,b as ve,R as me}from"../chunks/Dnvx4tmM.js";import{o as V,a as fe,s as ue}from"../chunks/CIwiONnU.js";import{p as ge}from"../chunks/CLolkaei.js";import{N as _e}from"../chunks/BXGJI-AL.js";import{s as T}from"../chunks/BjGBDkgq.js";import{p as K,i as R}from"../chunks/18K141Sn.js";import{p as Q}from"../chunks/BacJj1fc.js";import{s as S}from"../chunks/LVKOVOzu.js";import{s as pe}from"../chunks/DDCU0q_E.js";import{I as A,a as be}from"../chunks/DqWk7Urd.js";import{d as q}from"../chunks/ChM4DITq.js";import{g as he}from"../chunks/BwmWtf6n.js";import{_ as $}from"../chunks/5rqLzJeP.js";import{i as ye}from"../chunks/Cpw3NQFW.js";import{i as ke}from"../chunks/BJcQt1Sd.js";import{N as X,a as xe}from"../chunks/C5m1Kr_D.js";function we(i,e){const a=e*7;return ne(i,a)}function De(i){const e=G(i),b=+G(we(e,60))-+e;return Math.round(b/se)}const Se=!1,ga=Object.freeze(Object.defineProperty({__proto__:null,prerender:Se},Symbol.toStringTag,{value:"Module"}));function Ie(i,e,a){console.log(i.target.value),e(i.target.value),a()(i.target.value)}var Me=k("<option selected> </option>"),Ne=k("<option> </option>"),Ce=k('<div class="mb-3"><label for="select-day-type" class="form-label">Type of day</label> <select class="form-select"></select></div>');function Oe(i,e){E(e,!0);let a=K(e,"selected",23,()=>N.Regular),b=K(e,"selectedChange",3,()=>{});const f=A.makeDefault();var s=Ce(),d=_(m(s),2);S(d,"id",`select-day-type-${f??""}`),d.__change=[Ie,a,b],C(d,21,()=>N.values(),O,(h,l)=>{var y=Z(),c=W(y);{var g=t=>{var r=Me(),u={},w=m(r,!0);n(r),M(D=>{u!==(u=o(l))&&(r.value=(r.__value=o(l))==null?"":o(l)),T(w,D)},[()=>N.toString(o(l))]),p(t,r)},v=t=>{var r=Ne(),u={},w=m(r,!0);n(r),M(D=>{u!==(u=o(l))&&(r.value=(r.__value=o(l))==null?"":o(l)),T(w,D)},[()=>N.toString(o(l))]),p(t,r)};R(c,t=>{o(l)==a()?t(g):t(v,!1)})}p(h,y)}),n(d),n(s),p(i,s),Y()}q(["change"]);var Te=(i,e,a)=>e(o(a)),We=k('<li><a class="dropdown-item"> </a></li>'),Ee=(i,e,a)=>e(o(a)),Ye=k('<div class="badge rounded-pill mx-1 d-flex align-items-center"><span> </span> <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-x-circle ps-2" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"></path><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"></path></svg></div>'),Ae=k('<div class="d-flex mt-2"></div>'),Le=k('<div class="mb-3"><label for="select-day-type" class="form-label">Tags</label> <div class="dropdown"><a class="btn btn-outline-secondary dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">Add tag...</a> <ul class="dropdown-menu"></ul></div> <!></div>');function je(i,e){E(e,!0);let a=L.getDay(e.date);A.makeDefault();function b(c){a.tags.filter(v=>v==c.value).length>0||(a.tags.push(c.value),console.log(c),P.modified())}function f(c){a.tags=a.tags.filter(g=>g!=c),P.modified()}var s=Le(),d=_(m(s),2),h=_(m(d),2);C(h,21,()=>j.rune,O,(c,g)=>{var v=We(),t=m(v);t.__click=[Te,b,g];var r=m(t,!0);n(t),n(v),M(()=>T(r,o(g).value)),p(c,v)}),n(h),n(d);var l=_(d,2);{var y=c=>{var g=Ae();C(g,21,()=>a.tags,O,(v,t)=>{var r=Ye(),u=m(r),w=m(u,!0);n(u);var D=_(u,2);S(D,"width",22),S(D,"height",22),D.__click=[Ee,f,t],n(r),M((x,I)=>{S(r,"style",`color: ${x??""}; background-color: ${I??""};`),T(w,o(t))},[()=>$(j.get(o(t)).bgColor),()=>j.get(o(t)).bgColor]),p(v,r)}),n(g),p(c,g)};R(l,c=>{a.tags.length>0&&c(y)})}n(s),p(i,s),Y()}q(["click"]);var He=(i,e)=>{he(`/app/year/${e.date.getMonth()}/${e.date.getDate()}/timesheet`)},Re=k('<div class="mb-3"><label for="t1" class="form-label">Name</label> <input type="text" class="form-control" id="t1"></div> <!> <!>  <div class="mb-3"><label for="t2" class="form-label">Total Time</label> <input type="text" class="form-control" id="t2" disabled> <button type="button" class="btn btn-outline-secondary mt-3">Switch to timesheet</button></div>',1);function Be(i,e){E(e,!0);let a=L.getDay(e.date);function b(){let v=0;for(const t of a.timesheet)v+=ie.duration(t);return v}var f=Re(),s=W(f),d=_(m(s),2);d.__change=v=>{a.additionalName=v.target.value,P.modified()},n(s);var h=_(s,2);Oe(h,{get selected(){return a.dayType},selectedChange:v=>{a.dayType=v,P.modified()}});var l=_(h,2);je(l,{get date(){return e.date}});var y=_(l,2),c=_(m(y),2),g=_(c,2);g.__click=[He,e],n(y),M(v=>{S(d,"placeholder",a.additionalName),S(c,"placeholder",v)},[b]),p(i,f),Y()}q(["change","click"]);var Pe=k('<span class="badge rounded-pill mx-1 align-items-center"> </span>'),Fe=k('<div class="mx-3"></div>'),ze=k('<div><div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="collapseOne"><div class="d-flex justify-content-between w-100"><div> </div> <!></div></button></h2> <div class="accordion-collapse collapse" data-bs-parent="#accordionExample"><div class="accordion-body"><!></div></div></div></div>');function U(i,e){E(e,!0);const a=A.make(A.lengthForComponents),b=A.make(A.lengthForComponents);let f=L.getDay(e.date);function s(x){if(ye(x))return"dsToday";switch(f.dayType){case N.Holiday:return"dsHoliday"}if(ke(x))return"dsWeekend";switch(f.dayType){case N.Vacation:return"dsVacation";case N.Sick:return"dsSick";case N.SickNoAttest:return"dsSickNoAttest"}return""}V(async()=>{await oe(),window.location.hash==`#${e.date.getDate()}`&&(console.log(a),document.getElementById(a).scrollIntoView({behavior:"smooth",block:"center"}))});var d=ze();S(d,"id",a);var h=m(d),l=m(h);S(l,"id",`headingOne-${a??""}`);var y=m(l);S(y,"data-bs-target",`#${b??""}`);var c=m(y),g=m(c),v=m(g);n(g);var t=_(g,2);{var r=x=>{var I=Fe();C(I,21,()=>f.tags,O,(F,z)=>{var B=Pe(),ee=m(B,!0);n(B),M((ae,te)=>{S(B,"style",`color: ${ae??""}; background-color: ${te??""};`),T(ee,o(z))},[()=>$(j.get(o(z)).bgColor),()=>j.get(o(z)).bgColor]),p(F,B)}),n(I),p(x,I)};R(t,x=>{le.rune.tags.showTagsOnDays&&x(r)})}n(c),n(y),n(l);var u=_(l,2);S(u,"id",b),S(u,"aria-labelledby",`headingOne-${a??""}`);var w=m(u),D=m(w);Be(D,{get date(){return e.date}}),n(w),n(u),n(h),n(d),M((x,I,F)=>{pe(d,1,`accordion mb-2 ${x??""}`,"svelte-140uf3"),T(v,`${I??""}. ${F??""} ${(f.additionalName?" - ":"")??""} ${f.additionalName??""}`)},[()=>s(e.date),()=>J(e.date,"d"),()=>J(e.date,"EEEE")]),p(i,d),Y()}var Ue=k('<!> <p class="mt-3 d-flex justify-content-center"> </p>',1),qe=k('<p class="mt-3 d-flex justify-content-center"> </p> <!>',1),Ge=k('<h2 class="mb-2 mt-3"></h2> <!> <!> <!>',1);function Je(i,e){E(e,!0);const a=de(e.week[0],{weekStartsOn:1,firstWeekContainsDate:4});De(new Date(L.rune.yearLiteral,0)),ce(new Date(L.rune.yearLiteral,0));const b=e.month==0,f=e.month==11;let s=fe(Q({prefix:!1,days:[]}));e.week.length<7&&ue(s,Q(H.getRestDays(e.week)));var d=Ge(),h=W(d);h.textContent=`Week ${a??""}`;var l=_(h,2);{var y=t=>{var r=Ue(),u=W(r);C(u,17,()=>o(s).days,O,(x,I)=>{U(x,{get date(){return o(I)},isAdditional:!0})});var w=_(u,2),D=m(w);n(w),M(()=>T(D,`Begin of ${H.MonthNames[e.month]??""}`)),p(t,r)};R(l,t=>{o(s).days.length>0&&o(s).prefix&&!b&&t(y)})}var c=_(l,2);C(c,17,()=>e.week,O,(t,r)=>{U(t,{get date(){return o(r)},isAdditional:!1})});var g=_(c,2);{var v=t=>{var r=qe(),u=W(r),w=m(u);n(u);var D=_(u,2);C(D,17,()=>o(s).days,O,(x,I)=>{U(x,{get date(){return o(I)},isAdditional:!0})}),M(()=>T(w,`End of ${H.MonthNames[e.month]??""}`)),p(t,r)};R(g,t=>{o(s).days.length>0&&!o(s).prefix&&!f&&t(v)})}p(i,d),Y()}var Ke=k('<!> <div class="container mt-3 mb-3"></div>',1);function Qe(i,e){E(e,!0);const a=ge.params.month,b=H.getWeeks(new Date(L.rune.yearLiteral,a));V(async()=>{});var f=Ke(),s=W(f);const d=re(()=>[X.HomeItem(),X.Item("Months",xe.goUp)]);_e(s,{get name(){return H.MonthNames[a]},get navItems(){return o(d)}});var h=_(s,2);C(h,21,()=>b,O,(l,y)=>{Je(l,{month:a,get week(){return o(y)}})}),n(h),p(i,f),Y()}function _a(i,e){E(e,!0);var a=Z(),b=W(a);ve(b,()=>be.isLoaded(),null,(f,s)=>{Qe(f,{})},(f,s)=>{me(f,{})}),p(i,a),Y()}export{_a as component,ga as universal};
