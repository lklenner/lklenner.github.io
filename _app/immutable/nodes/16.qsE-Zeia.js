import"../chunks/Bg9kRutz.js";import{p as St,$ as Zt,k as t,A,i as te,f as ot,s,c as r,r as a,j as ee,t as P,a as Ft}from"../chunks/D6YVLWc7.js";import{t as j,a as k,c as Et}from"../chunks/CDD5XS2z.js";import{Q as ae,h as J,g as K,i as kt,j as oe,D as H,y as Tt,T as u,k as wt,P as Mt,l as re,f as se}from"../chunks/NRRmGcJT.js";import{R as ne}from"../chunks/Cs_ouzOI.js";import{a as ie}from"../chunks/BPWqFRe1.js";import{a as Z,o as le,c as de,s as tt}from"../chunks/CcHHxoBb.js";import{s as v}from"../chunks/p4ygoAWT.js";import{i as Dt}from"../chunks/UPzZwpuN.js";import{s as $}from"../chunks/Br45A0WC.js";import{s as ce}from"../chunks/CY6KYGQT.js";import{d as me}from"../chunks/BI9NCyiX.js";import{p as N}from"../chunks/DEahiPon.js";import{p as R}from"../chunks/aPyRa76Y.js";import{g as S}from"../chunks/BfzahOUo.js";import{N as pe}from"../chunks/DO_J4-0g.js";import{T as be,Q as ve}from"../chunks/Dm_Qq_O4.js";import{A as ue,a as fe}from"../chunks/B7pk6xwO.js";import{_ as ge}from"../chunks/BdMqpO4Y.js";import{X as he}from"../chunks/C5rvuJZa.js";import{N as et}from"../chunks/De9GgzYy.js";import{P as ye}from"../chunks/BcVSLwLk.js";import{T as _e}from"../chunks/q98SwoL3.js";import{T as xe}from"../chunks/CmRE5a5A.js";import{i as $t,N as at}from"../chunks/u8O5nmxo.js";const ke=!1,aa=Object.freeze(Object.defineProperty({__proto__:null,prerender:ke},Symbol.toStringTag,{value:"Module"}));function Te(I,T,i,g,c){const h=document.getElementById("inputStart"),w=document.getElementById("inputEnd");if(!h.reportValidity()||!w.reportValidity())return;const F=h.value,m=w.value,E=u.new(t(T),F,m,t(i),!1);try{u.validate(E)}catch(Q){t(g)("Entry could not be created!",Q.message,"text-bg-danger");return}t(c).timesheet.push(E),console.log(E),Mt.modified(),t(g)("Created entry",t(T),"text-bg-success")}function we(){S("/app/track")}var De=j('<tr><th scope="row"></th><td> </td><td> </td><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td><td><div class="d-flex"><button type="button" class="btn btn-sm d-flex align-items-center"><!></button> <button type="button" class="btn btn-sm d-flex align-items-center"><!></button></div></td></tr>'),$e=j('<div class="progress" role="progressbar"><div data-bs-toggle="tooltip" data-bs-placement="bottom"> </div></div>'),Se=j('<tr><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td></tr>'),Fe=j('<button type="button" class="btn btn-outline-secondary">Switch to Tracking</button>'),Ee=j('<!> <div class="container mt-3 mb-3"><h1 class="mt-3 mb-3"> </h1> <ul class="nav nav-tabs" id="myTab" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="editor-tab" data-bs-toggle="tab" data-bs-target="#editor-tab-pane" type="button" role="tab">Editor</button></li> <li class="nav-item" role="presentation"><button class="nav-link" id="statistics-tab" data-bs-toggle="tab" data-bs-target="#statistics-tab-pane" type="button" role="tab">Statistics</button></li></ul> <div class="tab-content mb-5"><div class="tab-pane show active" id="editor-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Total time</h3> <input type="text" class="form-control" disabled> <h3 class="mt-5 mb-3">All entries</h3> <table class="table"><thead><tr><th scope="col">#</th><th scope="col">Task</th><th scope="col">Start</th><th scope="col">End</th><th scope="col">Duration</th><th scope="col">Location</th><th scope="col">Action</th></tr></thead><tbody></tbody></table> <h3 class="mt-5 mb-3">Insert new entry</h3> <!> <form novalidate=""><div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label">Start</label> <div class="col-sm-2"><input type="time" id="inputStart" class="form-control"></div></div></form> <div class="row g-2 mb-3"><label for="inputEnd" class="col-sm-3 col-form-label">End</label> <div class="col-sm-2"><input type="time" id="inputEnd" class="form-control"></div></div> <!> <div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label"></label> <div class="col-sm-5"><button type="button" class="btn btn-secondary">Add Entry</button></div></div></div> <div class="tab-pane" id="statistics-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Task distrubiton</h3> <div class="progress-stacked mb-3 border" style="height: 50px"><!></div> <h3 class="mt-5 mb-3">Task summary</h3> <table class="table"><thead><tr><th scope="col">Task</th><th scope="col">Duration</th><th scope="col">Share</th></tr></thead><tbody></tbody></table></div></div> <div class="d-flex justify-content-between"><button type="button" class="btn btn-outline-secondary"><!> <span style="vertical-align: middle;">Previous</span></button> <!> <button type="button" class="btn btn-outline-secondary"><span style="vertical-align: middle;">Next</span> <!></button></div></div> <!>',1);function Me(I,T){St(T,!0);const i=A(()=>new Date(Tt.rune.yearLiteral,R.params.month,R.params.day)),g=["text-bg-primary","text-bg-success","text-bg-danger","text-bg-warning","text-bg-info","text-bg-light","text-bg-dark"];let c=A(()=>Tt.getDay(t(i))),h=Z(N(ae.Home)),w=Z(N(J.rune[0].name)),F=Z(void 0),m=A(()=>u.aggregateDurations(t(c).timesheet)),E=A(()=>{let e=0;for(const o of t(c).timesheet)e+=u.duration(o);return e});Zt(async()=>{t(m),await te(),xe.enable(),console.log("Enable tooltips")});function Q(){S(`/app/year/${R.params.month}#${t(i).getDate()}`)}function Ot(e){console.log("Remove:",e),t(c).timesheet=t(c).timesheet.filter((o,n)=>n!=e),Mt.modified()}function At(e){S(`/app/year/${R.params.month}/${t(i).getDate()}/timesheet/${e}`)}function W(){return Object.values(t(m)).reduce((e,o)=>e+o,0)}function rt(){let e=wt(t(i),-1);S(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function st(){let e=wt(t(i),1);S(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function Nt(){const e=re(t(i),{weekStartsOn:1,firstWeekContainsDate:4});S(`/app/year/week/${e}`)}function jt(e){const o=J.rune.find(l=>l.name==e);let n="";return o!==void 0&&o.color!=="#FFFFFF"&&(n+=`color: ${ge(o.color)};`,n+=`background-color: ${o.color};`),n}function It(e,o){const n=J.rune.find(d=>d.name==e);let l="";return(n===void 0||n.color.toUpperCase()==="#FFFFFF")&&(l=`${g[o%g.length]}`),l}function nt(e){e.key=="ArrowLeft"&&!H.isFirstDayOfYear(t(i))?rt():e.key=="ArrowRight"&&!H.isLastDayOfYear(t(i))&&st()}le(()=>{window.addEventListener("keydown",nt)}),de(()=>{window.removeEventListener("keydown",nt)});var it=Ee(),lt=ot(it);const Lt=A(()=>[et.HomeItem(),et.Item("Days",Q),et.Item("Week Report",Nt)]);pe(lt,{name:"Timesheet",get navItems(){return t(Lt)}});var Y=s(lt,2),B=r(Y),Ct=r(B);a(B);var V=s(B,4),X=r(V),dt=s(r(X),2),q=s(dt,4),ct=s(r(q));K(ct,21,()=>t(c).timesheet,kt,(e,o,n)=>{var l=De(),d=r(l);d.textContent=n+1;var f=s(d),b=r(f,!0);a(f);var p=s(f),D=r(p,!0);a(p);var y=s(p),O=r(y,!0);a(y);var _=s(y),x=r(_),Vt=r(x,!0);a(x),a(_);var U=s(_),Xt=r(U,!0);a(U);var _t=s(U),xt=r(_t),C=r(xt);C.__click=()=>{At(n)};var qt=r(C);ye(qt,{}),a(C);var G=s(C,2);G.__click=()=>{Ot(n)};var zt=r(G);he(zt,{colorStyle:"text-danger"}),a(G),a(xt),a(_t),a(l),P((Ut,Gt,Jt,Kt)=>{v(b,t(o).taskName),v(D,Ut),v(O,Gt),$(x,"data-bs-title",`${Jt??""} h`),v(Vt,Kt),v(Xt,t(o).quotaType)},[()=>u.formatTimespamp(t(o).start),()=>u.formatTimespamp(t(o).end),()=>u.formatDecimalTime(u.duration(t(o))),()=>at.toFixed(Math.round(u.duration(t(o))*1e4)/1e4,3)]),k(e,l)}),a(ct),a(q);var mt=s(q,4);be(mt,{get selected(){return t(w)},set selected(e){tt(w,N(e))}});var pt=s(mt,6);ve(pt,{get selected(){return t(h)},set selected(e){tt(h,N(e))}});var bt=s(pt,2),vt=s(r(bt),2),Pt=r(vt);Pt.__click=[Te,w,h,F,c],a(vt),a(bt),a(X);var ut=s(X,2),z=s(r(ut),2),Ht=r(z);{var Rt=e=>{var o=Et(),n=ot(o);K(n,18,()=>Object.keys(t(m)).sort(),l=>l,(l,d,f)=>{var b=$e(),p=r(b),D=r(p,!0);a(p),a(b),P((y,O,_,x)=>{$(b,"style",`width: ${y??""}%; height: 50px;`),ce(p,1,`progress-bar ${O??""}`),$(p,"style",_),$(p,"data-bs-title",`${d??""}: ${x??""}%`),v(D,d)},[()=>t(m)[d]/W()*100,()=>It(d,t(f)),()=>jt(d),()=>Math.round(t(m)[d]/W()*1e4)/100]),k(l,b)}),k(e,o)};Dt(Ht,e=>{Object.keys(t(m)).length>0&&e(Rt)})}a(z);var ft=s(z,4),gt=s(r(ft));K(gt,21,()=>Object.keys(t(m)).sort(),kt,(e,o)=>{var n=Se(),l=r(n),d=r(l,!0);a(l);var f=s(l),b=r(f),p=r(b,!0);a(b),a(f);var D=s(f),y=r(D);a(D),a(n),P((O,_,x)=>{v(d,t(o)),$(b,"data-bs-title",`${O??""} h`),v(p,_),v(y,`${x??""}%`)},[()=>u.formatDecimalTime(Math.round(t(m)[t(o)]*100)/100),()=>at.toFixed(t(m)[t(o)],3),()=>Math.round(t(m)[t(o)]/W()*1e4)/100]),k(e,n)}),a(gt),a(ft),a(ut),a(V);var ht=s(V,2),M=r(ht);M.__click=rt;var Qt=r(M);ue(Qt,{}),ee(2),a(M);var yt=s(M,2);{var Wt=e=>{var o=Fe();o.__click=[we],k(e,o)};Dt(yt,e=>{$t(t(i))&&e(Wt)})}var L=s(yt,2);L.__click=st;var Yt=s(r(L),2);fe(Yt,{}),a(L),a(ht),a(Y);var Bt=s(Y,2);_e(Bt,{get show(){return t(F)},set show(e){tt(F,N(e))}}),P((e,o,n,l,d)=>{v(Ct,`Timesheet for ${e??""}${o??""}`),$(dt,"placeholder",n),M.disabled=l,L.disabled=d},[()=>oe(t(i),"E dd MMMM yyyy"),()=>$t(t(i))?" (Today)":"",()=>at.toFixed(t(E),3),()=>H.isFirstDayOfYear(t(i)),()=>H.isLastDayOfYear(t(i))]),k(I,it),Ft()}me(["click"]);function oa(I,T){St(T,!0);var i=Et(),g=ot(i);se(g,()=>ie.isLoaded(),null,(c,h)=>{Me(c,{})},c=>{ne(c,{})}),k(I,i),Ft()}export{oa as component,aa as universal};
