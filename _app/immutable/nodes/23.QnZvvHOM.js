import"../chunks/Bg9kRutz.js";import{p as ot,f as Y,m as t,N as m,s as f,c as e,r as a,t as O,a as st}from"../chunks/DCGbEjkp.js";import{t as b,a as _,c as Dt}from"../chunks/B6we1ui4.js";import{t as nt,l as Ot,r as St,y as S,c as M,i as T,b as $t,u as Nt,T as et,k as Wt,a as Lt}from"../chunks/Dtfp-KIX.js";import{R as Mt}from"../chunks/EjqemIE5.js";import{a as Tt}from"../chunks/BVxO1hEQ.js";import{s as $}from"../chunks/DjLPlESz.js";import{k as At}from"../chunks/tgzHt4pn.js";import{s as at}from"../chunks/CQJXRoj6.js";import{s as It}from"../chunks/DctH-kaB.js";import{d as Rt}from"../chunks/nxS3RBuk.js";import{o as Bt,c as Ft}from"../chunks/Cc6sp6Aj.js";import{p as A}from"../chunks/DMN9UjVb.js";import{N as jt}from"../chunks/Cl8tRtSd.js";import{N as rt}from"../chunks/BPM-ywpK.js";import{g as I}from"../chunks/CxHFiZ8Q.js";import{A as Et,a as Yt}from"../chunks/DyJCpP8k.js";import{g as Ht}from"../chunks/CHzjgaZ-.js";import{g as zt}from"../chunks/C9a91_5u.js";function Ct(p,n){const r=n==null?void 0:n.weekStartsOn,s=nt(p),i=s.getDay(),g=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+g),s.setHours(23,59,59,999),s}function Pt(p,n,r){const s=nt(p),i=Ot(s,r)-n;return s.setDate(s.getDate()-i*7),s}const qt=!1,be=Object.freeze(Object.defineProperty({__proto__:null,prerender:qt},Symbol.toStringTag,{value:"Module"}));var Gt=(p,n,r)=>n(t(r)),Jt=b('<th scope="col"> </th>'),Kt=b("<td> </td>"),Qt=b("<tr><td> </td><!></tr>"),Ut=b('<td class="pt-5"><i> </i></td>'),Vt=b('<div class="container mt-3"><h1> </h1></div> <div class="d-flex mt-3 mb-3"><div class="d-flex m-4 align-items-center"><button class="btn btn-outline-secondary py-4 d-flex align-items-center"><!></button></div> <div class="container"><table class="table"><thead><tr><th scope="col">Task</th><!></tr></thead><tbody><!><tr><td class="pt-5"><span>&Sigma;</span></td><!></tr></tbody></table></div> <div class="d-flex m-4 align-items-center"><button class="btn btn-outline-secondary py-4 d-flex align-items-center"><!></button></div></div>',1),Xt=b("<!> <!>",1);function Zt(p,n){ot(n,!0),console.log(A.params.week);const r=m(()=>Number(A.params.week)),s=St(new Date(S.rune.yearLiteral,0)),i=m(()=>Pt(s,A.params.week)),g=m(()=>Nt(t(i),{weekStartsOn:1})),it=m(()=>Ct(t(g),{weekStartsOn:1})),ct=m(()=>zt(t(i))),N=m(()=>$t({start:t(g),end:t(it)})),H=m(()=>Ht(Number(S.rune.yearLiteral))),z=m(()=>lt(t(N))),dt=m(()=>t(z)[0]),C=m(()=>t(z)[1]);function lt(o){const c=new Set,d=[];for(const k of o){const R=S.getDay(k),h=et.aggregateDurations(R.timesheet);Object.keys(h).forEach(w=>{c.add(w)}),d.push(h)}return[Array.from(c).sort(),d]}function mt(o,c){const d=t(C)[c];return o in d?d[o].toFixed(2):0}function vt(o){const c=t(C)[o];return et.getTotalDuration(c).toFixed(2)}function ft(){I(`/app/year/${t(ct)}`)}function P(){I(`/app/year/week/${t(r)-1}`)}function q(){I(`/app/year/week/${t(r)+1}`)}function pt(o){const c=o.getDate(),d=o.getMonth(),k=o.getFullYear();Number(S.rune.yearLiteral)==k&&I(`/app/year/${d}/${c}/timesheet`)}function G(o){o.key=="ArrowLeft"&&1<t(r)?P():o.key=="ArrowRight"&&t(r)<t(H)&&q()}Bt(()=>{window.addEventListener("keydown",G)}),Ft(()=>{window.removeEventListener("keydown",G)});var J=Xt(),K=Y(J);const ut=m(()=>[rt.HomeItem(),rt.Item("Days",ft)]);jt(K,{name:"Week-Report",get navItems(){return t(ut)}});var _t=f(K,2);At(_t,()=>A.params.week,o=>{var c=Vt(),d=Y(c),k=e(d),R=e(k);a(k),a(d);var h=f(d,2),w=e(h),W=e(w);W.__click=P;var gt=e(W);Et(gt,{}),a(W),a(w);var B=f(w,2),Q=e(B),F=e(Q),U=e(F),kt=f(e(U));M(kt,17,()=>t(N),T,(x,u)=>{var l=Jt();l.__click=[Gt,pt,u];var v=e(l,!0);a(l),O((y,D)=>{It(l,1,y,"svelte-s66s5j"),$(v,D)},[()=>Number(S.rune.yearLiteral)==t(u).getFullYear()?"clickable":"",()=>Wt(t(u),"dd.MM")]),_(x,l)}),a(U),a(F);var V=f(F),X=e(V);M(X,17,()=>t(dt),T,(x,u)=>{var l=Qt(),v=e(l),y=e(v,!0);a(v);var D=f(v);M(D,17,()=>t(N),T,(j,te,ht)=>{var E=Kt(),wt=e(E,!0);a(E),O(xt=>$(wt,xt),[()=>mt(t(u),ht)]),_(j,E)}),a(l),O(()=>$(y,t(u))),_(x,l)});var Z=f(X),yt=f(e(Z));M(yt,17,()=>t(N),T,(x,u,l)=>{var v=Ut(),y=e(v),D=e(y,!0);a(y),a(v),O(j=>$(D,j),[()=>vt(l)]),_(x,v)}),a(Z),a(V),a(Q),a(B);var tt=f(B,2),L=e(tt);L.__click=q;var bt=e(L);Yt(bt,{}),a(L),a(tt),a(h),O(()=>{$(R,`Task Summary for CW ${t(r)??""}`),at(W,"style",`visibility: ${(t(r)==1?"hidden":"visible")??""}`),at(L,"style",`visibility: ${(t(r)==t(H)?"hidden":"visible")??""}`)}),_(o,c)}),_(p,J),st()}Rt(["click"]);function he(p,n){ot(n,!0);var r=Dt(),s=Y(r);Lt(s,()=>Tt.isLoaded(),null,(i,g)=>{Zt(i,{})},(i,g)=>{Mt(i,{})}),_(p,r),st()}export{he as component,be as universal};
