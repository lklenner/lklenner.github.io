import"../chunks/Bg9kRutz.js";import{p as x,_ as O,i as o,z as m,t as Y,f as D,s as l,d as n,r as i,b as L,c as S,h as j}from"../chunks/DA61WD3S.js";import{y as d,T as R,k as W,d as z,a as E}from"../chunks/E28ZXaGp.js";import{a as F}from"../chunks/DTXHbV85.js";import{R as q}from"../chunks/CAzcpioX.js";import{b as A,a as C}from"../chunks/DwvvTgU3.js";import{p as _}from"../chunks/D8MQwctJ.js";import{N as w}from"../chunks/BWQOId1f.js";import{N as G}from"../chunks/BWAQuPye.js";import{Y as J}from"../chunks/D7LdZOQ5.js";import{T as K}from"../chunks/CXrqufdU.js";import{S as P}from"../chunks/CLpWN2Xq.js";import{N as Q}from"../chunks/BVYeyYbP.js";import{g as U}from"../chunks/BUQyV99V.js";class p{constructor(){this.dateBins={}}static collect(r){const a=new p;for(const t of r){const e=d.getDay(t),s=R.aggregateDurations(e.timesheet);a.dateBins[W(t,"yyyy-MM-dd")]=s}return a}toHeatmapData(r){const a=[];for(const[e,s]of Object.entries(this.dateBins))Object.keys(s).includes(r)?a.push({date:e,value:s[r]}):a.push({date:e,value:0});return{source:a,x:"date",y:"value"}}}var V=Y('<!> <div class="container mt-3 mb-3"><div class="card mt-3 mb-3 shadow-sm clickable"><div class="card-body"><h5 class="card-title">Task Heatmap</h5> <h6 class="card-subtitle mb-3 text-body-secondary">Select a task to see when and how much you have worked on it.</h6> <!> <div class="mt-5"><!></div></div></div></div>',1);function X(c,r){x(r,!0);function a(H,I,M){return Q.toFixed(I,2)+"h on "+M.format("LL")}let t=A(_(z.rune[0].name));const e=new P(d.rune.yearLiteral),s=p.collect(e.allDatesOfYear);console.log(s);const f=m(()=>s.toHeatmapData(o(t)));new Date(d.rune.yearLiteral,0,2),O(()=>{console.log(o(t),o(f))});var u=V(),v=D(u);const T=m(()=>[w.HomeItem(),w.Item("Back",()=>{U("/app/statistics")})]);G(v,{name:"Heatmap",get navItems(){return o(T)}});var h=l(v,2),y=n(h),b=n(y),g=l(n(b),4);K(g,{labelLeft:!1,get selected(){return o(t)},set selected(H){C(t,_(H))}});var k=l(g,2),B=n(k);const N=m(()=>new Date(d.rune.yearLiteral,0,2));J(B,{get startDate(){return o(N)},get data(){return o(f)},tooltipText:a}),i(k),i(b),i(y),i(h),L(c,u),S()}function pa(c,r){x(r,!0);var a=j(),t=D(a);E(t,()=>F.isLoaded(),null,(e,s)=>{X(e,{})},(e,s)=>{q(e,{})}),L(c,a),S()}export{pa as component};
