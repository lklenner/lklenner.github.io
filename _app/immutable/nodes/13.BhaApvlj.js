import"../chunks/Bg9kRutz.js";import{p as x,aj as M,m as o,N as m,f as D,s as l,c as n,r as i,a as L}from"../chunks/DCGbEjkp.js";import{t as O,a as S,c as Y}from"../chunks/B6we1ui4.js";import{y as c,T as R,k as W,d as E,a as F}from"../chunks/Dtfp-KIX.js";import{a as q}from"../chunks/BVxO1hEQ.js";import{R as z}from"../chunks/EjqemIE5.js";import{a as A,s as C}from"../chunks/Cc6sp6Aj.js";import{p as _}from"../chunks/R7SZNG97.js";import{N as w}from"../chunks/BPM-ywpK.js";import{N as G}from"../chunks/Cl8tRtSd.js";import{Y as J}from"../chunks/D4e0ZZEx.js";import{T as K}from"../chunks/D4m22MAx.js";import{S as P}from"../chunks/Bp-xZ2TU.js";import{N as Q}from"../chunks/BVYeyYbP.js";import{g as U}from"../chunks/CxHFiZ8Q.js";class p{constructor(){this.dateBins={}}static collect(r){const a=new p;for(const t of r){const e=c.getDay(t),s=R.aggregateDurations(e.timesheet);a.dateBins[W(t,"yyyy-MM-dd")]=s}return a}toHeatmapData(r){const a=[];for(const[e,s]of Object.entries(this.dateBins))Object.keys(s).includes(r)?a.push({date:e,value:s[r]}):a.push({date:e,value:0});return{source:a,x:"date",y:"value"}}}var V=O('<!> <div class="container mt-3 mb-3"><div class="card mt-3 mb-3 shadow-sm clickable"><div class="card-body"><h5 class="card-title">Task Heatmap</h5> <h6 class="card-subtitle mb-3 text-body-secondary">Select a task to see when and how much you have worked on it.</h6> <!> <div class="mt-5"><!></div></div></div></div>',1);function X(d,r){x(r,!0);function a(H,j,I){return Q.toFixed(j,2)+"h on "+I.format("LL")}let t=A(_(E.rune[0].name));const e=new P(c.rune.yearLiteral),s=p.collect(e.allDatesOfYear);console.log(s);const f=m(()=>s.toHeatmapData(o(t)));new Date(c.rune.yearLiteral,0,2),M(()=>{console.log(o(t),o(f))});var u=V(),v=D(u);const T=m(()=>[w.HomeItem(),w.Item("Back",()=>{U("/app/statistics")})]);G(v,{name:"Heatmap",get navItems(){return o(T)}});var y=l(v,2),h=n(y),g=n(h),b=l(n(g),4);K(b,{labelLeft:!1,get selected(){return o(t)},set selected(H){C(t,_(H))}});var k=l(b,2),N=n(k);const B=m(()=>new Date(c.rune.yearLiteral,0,2));J(N,{get startDate(){return o(B)},get data(){return o(f)},tooltipText:a}),i(k),i(g),i(h),i(y),S(d,u),L()}function fa(d,r){x(r,!0);var a=Y(),t=D(a);F(t,()=>q.isLoaded(),null,(e,s)=>{X(e,{})},(e,s)=>{z(e,{})}),S(d,a),L()}export{fa as component};
