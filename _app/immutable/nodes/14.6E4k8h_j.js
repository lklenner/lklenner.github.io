import"../chunks/Bg9kRutz.js";import{t as j,p as St,av as Zt,k as t,A as N,i as te,f as ot,s,c as r,r as a,j as ee,a as Ft}from"../chunks/DVl1eqIf.js";import{n as ae,a as _,t as C,c as Mt}from"../chunks/BbopcKfd.js";import{Q as oe,h as J,g as K,i as kt,k as re,D as H,y as wt,T as f,l as Tt,P as Et,o as se,f as ne}from"../chunks/Df_ahsfi.js";import{R as ie}from"../chunks/Dmwe8nXe.js";import{a as le}from"../chunks/DX14NvuP.js";import{a as Z,o as de,c as ce,s as tt}from"../chunks/C_sUaDGO.js";import{s as u}from"../chunks/UmDqWYja.js";import{p as me,i as Dt}from"../chunks/CPODWPa_.js";import{s as y}from"../chunks/BtJF9F5H.js";import{s as pe}from"../chunks/9FSUsWcs.js";import{d as ve}from"../chunks/3pJTpWBv.js";import{p as L}from"../chunks/9TXrOhxM.js";import{p as P}from"../chunks/WnWpBLpR.js";import{g as F}from"../chunks/-YOyLjRF.js";import{N as be}from"../chunks/DFwEjWig.js";import{T as ue,Q as fe}from"../chunks/DXjSBvps.js";import{A as he,a as ge}from"../chunks/COU60_eS.js";import{_ as _e}from"../chunks/OvYoHjyh.js";import{X as ye}from"../chunks/Be7m_nQ8.js";import{N as et}from"../chunks/BG-v5zhv.js";import{T as xe}from"../chunks/T2l36TAZ.js";import{T as ke}from"../chunks/CmRE5a5A.js";import{i as $t,N as at}from"../chunks/Ck5IEoK6.js";const we=!1,ra=Object.freeze(Object.defineProperty({__proto__:null,prerender:we},Symbol.toStringTag,{value:"Module"}));var Te=ae('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16"><path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"></path></svg>');function De(D,g){let n=me(g,"size",3,16);var p=Te();j(()=>{y(p,"width",n()),y(p,"height",n())}),_(D,p)}function $e(D,g,n,p,c){const x=document.getElementById("inputStart"),$=document.getElementById("inputEnd");if(!x.reportValidity()||!$.reportValidity())return;const M=x.value,m=$.value,E=f.new(t(g),M,m,t(n),!1);try{f.validate(E)}catch(R){t(p)("Entry could not be created!",R.message,"text-bg-danger");return}t(c).timesheet.push(E),console.log(E),Et.modified(),t(p)("Created entry",t(g),"text-bg-success")}function Se(){F("/app/track")}var Fe=C('<tr><th scope="row"></th><td> </td><td> </td><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td><td><div class="d-flex"><button type="button" class="btn btn-sm d-flex align-items-center"><!></button> <button type="button" class="btn btn-sm d-flex align-items-center"><!></button></div></td></tr>'),Me=C('<div class="progress" role="progressbar"><div data-bs-toggle="tooltip" data-bs-placement="bottom"> </div></div>'),Ee=C('<tr><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td></tr>'),Ae=C('<button type="button" class="btn btn-outline-secondary">Switch to Tracking</button>'),Oe=C('<!> <div class="container mt-3 mb-3"><h1 class="mt-3 mb-3"> </h1> <ul class="nav nav-tabs" id="myTab" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="editor-tab" data-bs-toggle="tab" data-bs-target="#editor-tab-pane" type="button" role="tab">Editor</button></li> <li class="nav-item" role="presentation"><button class="nav-link" id="statistics-tab" data-bs-toggle="tab" data-bs-target="#statistics-tab-pane" type="button" role="tab">Statistics</button></li></ul> <div class="tab-content mb-5"><div class="tab-pane show active" id="editor-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Total time</h3> <input type="text" class="form-control" disabled> <h3 class="mt-5 mb-3">All entries</h3> <table class="table"><thead><tr><th scope="col">#</th><th scope="col">Task</th><th scope="col">Start</th><th scope="col">End</th><th scope="col">Duration</th><th scope="col">Location</th><th scope="col">Action</th></tr></thead><tbody></tbody></table> <h3 class="mt-5 mb-3">Insert new entry</h3> <!> <form novalidate=""><div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label">Start</label> <div class="col-sm-2"><input type="time" id="inputStart" class="form-control"></div></div></form> <div class="row g-2 mb-3"><label for="inputEnd" class="col-sm-3 col-form-label">End</label> <div class="col-sm-2"><input type="time" id="inputEnd" class="form-control"></div></div> <!> <div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label"></label> <div class="col-sm-5"><button type="button" class="btn btn-secondary">Add Entry</button></div></div></div> <div class="tab-pane" id="statistics-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Task distrubiton</h3> <div class="progress-stacked mb-3 border" style="height: 50px"><!></div> <h3 class="mt-5 mb-3">Task summary</h3> <table class="table"><thead><tr><th scope="col">Task</th><th scope="col">Duration</th><th scope="col">Share</th></tr></thead><tbody></tbody></table></div></div> <div class="d-flex justify-content-between"><button type="button" class="btn btn-outline-secondary"><!> <span style="vertical-align: middle;">Previous</span></button> <!> <button type="button" class="btn btn-outline-secondary"><span style="vertical-align: middle;">Next</span> <!></button></div></div> <!>',1);function Ne(D,g){St(g,!0);const n=N(()=>new Date(wt.rune.yearLiteral,P.params.month,P.params.day)),p=["text-bg-primary","text-bg-success","text-bg-danger","text-bg-warning","text-bg-info","text-bg-light","text-bg-dark"];let c=N(()=>wt.getDay(t(n))),x=Z(L(oe.Home)),$=Z(L(J.rune[0].name)),M=Z(void 0),m=N(()=>f.aggregateDurations(t(c).timesheet)),E=N(()=>{let e=0;for(const o of t(c).timesheet)e+=f.duration(o);return e});Zt(async()=>{t(m),await te(),ke.enable(),console.log("Enable tooltips")});function R(){F(`/app/year/${P.params.month}#${t(n).getDate()}`)}function At(e){console.log("Remove:",e),t(c).timesheet=t(c).timesheet.filter((o,i)=>i!=e),Et.modified()}function Ot(e){F(`/app/year/${P.params.month}/${t(n).getDate()}/timesheet/${e}`)}function Q(){return Object.values(t(m)).reduce((e,o)=>e+o,0)}function rt(){let e=Tt(t(n),-1);F(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function st(){let e=Tt(t(n),1);F(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function Nt(){const e=se(t(n),{weekStartsOn:1,firstWeekContainsDate:4});F(`/app/year/week/${e}`)}function Lt(e){const o=J.rune.find(l=>l.name==e);let i="";return o!==void 0&&o.color!=="#FFFFFF"&&(i+=`color: ${_e(o.color)};`,i+=`background-color: ${o.color};`),i}function jt(e,o){const i=J.rune.find(d=>d.name==e);let l="";return(i===void 0||i.color.toUpperCase()==="#FFFFFF")&&(l=`${p[o%p.length]}`),l}function nt(e){e.key=="ArrowLeft"&&!H.isFirstDayOfYear(t(n))?rt():e.key=="ArrowRight"&&!H.isLastDayOfYear(t(n))&&st()}de(()=>{window.addEventListener("keydown",nt)}),ce(()=>{window.removeEventListener("keydown",nt)});var it=Oe(),lt=ot(it);const Ct=N(()=>[et.HomeItem(),et.Item("Days",R),et.Item("Week Report",Nt)]);be(lt,{name:"Timesheet",get navItems(){return t(Ct)}});var V=s(lt,2),B=r(V),It=r(B);a(B);var W=s(B,4),Y=r(W),dt=s(r(Y),2),X=s(dt,4),ct=s(r(X));K(ct,21,()=>t(c).timesheet,kt,(e,o,i)=>{var l=Fe(),d=r(l);d.textContent=i+1;var h=s(d),b=r(h,!0);a(h);var v=s(h),S=r(v,!0);a(v);var k=s(v),O=r(k,!0);a(k);var w=s(k),T=r(w),Wt=r(T,!0);a(T),a(w);var U=s(w),Yt=r(U,!0);a(U);var yt=s(U),xt=r(yt),z=r(xt);z.__click=()=>{Ot(i)};var Xt=r(z);De(Xt,{}),a(z);var G=s(z,2);G.__click=()=>{At(i)};var qt=r(G);ye(qt,{colorStyle:"text-danger"}),a(G),a(xt),a(yt),a(l),j((Ut,Gt,Jt,Kt)=>{u(b,t(o).taskName),u(S,Ut),u(O,Gt),y(T,"data-bs-title",`${Jt??""} h`),u(Wt,Kt),u(Yt,t(o).quotaType)},[()=>f.formatTimespamp(t(o).start),()=>f.formatTimespamp(t(o).end),()=>f.formatDecimalTime(f.duration(t(o))),()=>at.toFixed(Math.round(f.duration(t(o))*1e4)/1e4,3)]),_(e,l)}),a(ct),a(X);var mt=s(X,4);ue(mt,{get selected(){return t($)},set selected(e){tt($,L(e))}});var pt=s(mt,6);fe(pt,{get selected(){return t(x)},set selected(e){tt(x,L(e))}});var vt=s(pt,2),bt=s(r(vt),2),zt=r(bt);zt.__click=[$e,$,x,M,c],a(bt),a(vt),a(Y);var ut=s(Y,2),q=s(r(ut),2),Ht=r(q);{var Pt=e=>{var o=Mt(),i=ot(o);K(i,18,()=>Object.keys(t(m)).sort(),l=>l,(l,d,h)=>{var b=Me(),v=r(b),S=r(v,!0);a(v),a(b),j((k,O,w,T)=>{y(b,"style",`width: ${k??""}%; height: 50px;`),pe(v,1,`progress-bar ${O??""}`),y(v,"style",w),y(v,"data-bs-title",`${d??""}: ${T??""}%`),u(S,d)},[()=>t(m)[d]/Q()*100,()=>jt(d,t(h)),()=>Lt(d),()=>Math.round(t(m)[d]/Q()*1e4)/100]),_(l,b)}),_(e,o)};Dt(Ht,e=>{Object.keys(t(m)).length>0&&e(Pt)})}a(q);var ft=s(q,4),ht=s(r(ft));K(ht,21,()=>Object.keys(t(m)).sort(),kt,(e,o)=>{var i=Ee(),l=r(i),d=r(l,!0);a(l);var h=s(l),b=r(h),v=r(b,!0);a(b),a(h);var S=s(h),k=r(S);a(S),a(i),j((O,w,T)=>{u(d,t(o)),y(b,"data-bs-title",`${O??""} h`),u(v,w),u(k,`${T??""}%`)},[()=>f.formatDecimalTime(Math.round(t(m)[t(o)]*100)/100),()=>at.toFixed(t(m)[t(o)],3),()=>Math.round(t(m)[t(o)]/Q()*1e4)/100]),_(e,i)}),a(ht),a(ft),a(ut),a(W);var gt=s(W,2),A=r(gt);A.__click=rt;var Rt=r(A);he(Rt,{}),ee(2),a(A);var _t=s(A,2);{var Qt=e=>{var o=Ae();o.__click=[Se],_(e,o)};Dt(_t,e=>{$t(t(n))&&e(Qt)})}var I=s(_t,2);I.__click=st;var Vt=s(r(I),2);ge(Vt,{}),a(I),a(gt),a(V);var Bt=s(V,2);xe(Bt,{get show(){return t(M)},set show(e){tt(M,L(e))}}),j((e,o,i,l,d)=>{u(It,`Timesheet for ${e??""}${o??""}`),y(dt,"placeholder",i),A.disabled=l,I.disabled=d},[()=>re(t(n),"E dd MMMM yyyy"),()=>$t(t(n))?" (Today)":"",()=>at.toFixed(t(E),3),()=>H.isFirstDayOfYear(t(n)),()=>H.isLastDayOfYear(t(n))]),_(D,it),Ft()}ve(["click"]);function sa(D,g){St(g,!0);var n=Mt(),p=ot(n);ne(p,()=>le.isLoaded(),null,(c,x)=>{Ne(c,{})},c=>{ie(c,{})}),_(D,n),Ft()}export{sa as component,ra as universal};
