import"../chunks/Bg9kRutz.js";import{p as Ft,a1 as ee,k as t,D as A,i as ae,f as ot,s,c as r,r as a,j as oe,t as H,a as Et}from"../chunks/Dk-3uZ7-.js";import{t as j,a as k,c as Mt}from"../chunks/MEy6nb--.js";import{h as J,g as K,i as kt,l as re,D as P,y as Tt,T as u,j as wt,P as Ot,n as se,f as ne}from"../chunks/BcqV0jEZ.js";import{R as ie}from"../chunks/CSLQCRWn.js";import{a as At}from"../chunks/Bb6kHuvm.js";import{a as Z,o as le,c as de,s as tt}from"../chunks/C2_p6BS0.js";import{s as v}from"../chunks/HYwG6HKy.js";import{i as Dt}from"../chunks/ClpcCWp1.js";import{s as $}from"../chunks/70hiQGY9.js";import{s as ce}from"../chunks/IvFCNWTJ.js";import{d as me}from"../chunks/Cid6_tu6.js";import{p as N}from"../chunks/BaFDXL54.js";import{p as R}from"../chunks/G3DzPG5g.js";import{g as S}from"../chunks/Dex6RJ0O.js";import{Q as $t}from"../chunks/D1otcRzy.js";import{N as pe}from"../chunks/Co5EyOqe.js";import{T as be,Q as ve}from"../chunks/BwB0fO0B.js";import{A as ue,a as fe}from"../chunks/LB1AoE_X.js";import{D as ge,_ as he}from"../chunks/Cn1lQqkm.js";import{X as _e}from"../chunks/CSHQI80t.js";import{N as et}from"../chunks/D4SM0mbN.js";import{P as ye}from"../chunks/CVFzd7XU.js";import{T as xe}from"../chunks/OzmaBmxi.js";import{T as ke}from"../chunks/CmRE5a5A.js";import{i as St,N as at}from"../chunks/feLb3uoT.js";const Te=!1,ra=Object.freeze(Object.defineProperty({__proto__:null,prerender:Te},Symbol.toStringTag,{value:"Module"}));function we(I,T,i,g,c){const h=document.getElementById("inputStart"),w=document.getElementById("inputEnd");if(!h.reportValidity()||!w.reportValidity())return;const F=h.value,m=w.value,E=u.new(t(T),F,m,t(i),!1);try{u.validate(E)}catch(Q){t(g)("Entry could not be created!",Q.message,"text-bg-danger");return}t(c).timesheet.push(E),ge.modified(t(c)),console.log(E),Ot.modified(),t(g)("Created entry",t(T),"text-bg-success")}function De(){S("/app/track")}var $e=j('<tr><th scope="row"></th><td> </td><td> </td><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td><td><div class="d-flex"><button type="button" class="btn btn-sm d-flex align-items-center"><!></button> <button type="button" class="btn btn-sm d-flex align-items-center"><!></button></div></td></tr>'),Se=j('<div class="progress" role="progressbar"><div data-bs-toggle="tooltip" data-bs-placement="bottom"> </div></div>'),Fe=j('<tr><td> </td><td><span data-bs-toggle="tooltip" data-bs-placement="bottom"> </span></td><td> </td></tr>'),Ee=j('<button type="button" class="btn btn-outline-secondary">Switch to Tracking</button>'),Me=j('<!> <div class="container mt-3 mb-3"><h1 class="mt-3 mb-3"> </h1> <ul class="nav nav-tabs" id="myTab" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="editor-tab" data-bs-toggle="tab" data-bs-target="#editor-tab-pane" type="button" role="tab">Editor</button></li> <li class="nav-item" role="presentation"><button class="nav-link" id="statistics-tab" data-bs-toggle="tab" data-bs-target="#statistics-tab-pane" type="button" role="tab">Statistics</button></li></ul> <div class="tab-content mb-5"><div class="tab-pane show active" id="editor-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Total time</h3> <input type="text" class="form-control" disabled> <h3 class="mt-5 mb-3">All entries</h3> <table class="table"><thead><tr><th scope="col">#</th><th scope="col">Task</th><th scope="col">Start</th><th scope="col">End</th><th scope="col">Duration</th><th scope="col">Location</th><th scope="col">Action</th></tr></thead><tbody></tbody></table> <h3 class="mt-5 mb-3">Insert new entry</h3> <!> <form novalidate=""><div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label">Start</label> <div class="col-sm-2"><input type="time" id="inputStart" class="form-control"></div></div></form> <div class="row g-2 mb-3"><label for="inputEnd" class="col-sm-3 col-form-label">End</label> <div class="col-sm-2"><input type="time" id="inputEnd" class="form-control"></div></div> <!> <div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label"></label> <div class="col-sm-5"><button type="button" class="btn btn-secondary">Add Entry</button></div></div></div> <div class="tab-pane" id="statistics-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Task distrubiton</h3> <div class="progress-stacked mb-3 border" style="height: 50px"><!></div> <h3 class="mt-5 mb-3">Task summary</h3> <table class="table"><thead><tr><th scope="col">Task</th><th scope="col">Duration</th><th scope="col">Share</th></tr></thead><tbody></tbody></table></div></div> <div class="d-flex justify-content-between"><button type="button" class="btn btn-outline-secondary"><!> <span style="vertical-align: middle;">Previous</span></button> <!> <button type="button" class="btn btn-outline-secondary"><span style="vertical-align: middle;">Next</span> <!></button></div></div> <!>',1);function Oe(I,T){Ft(T,!0);const i=A(()=>new Date(Tt.rune.yearLiteral,R.params.month,R.params.day)),g=["text-bg-primary","text-bg-success","text-bg-danger","text-bg-warning","text-bg-info","text-bg-light","text-bg-dark"];let c=A(()=>Tt.getDay(t(i))),h=Z(N(At.rune.atHome?$t.Home:$t.Office)),w=Z(N(J.rune[0].name)),F=Z(void 0),m=A(()=>u.aggregateDurations(t(c).timesheet)),E=A(()=>{let e=0;for(const o of t(c).timesheet)e+=u.duration(o);return e});ee(async()=>{t(m),await ae(),ke.enable(),console.log("Enable tooltips")});function Q(){S(`/app/year/${R.params.month}#${t(i).getDate()}`)}function Nt(e){console.log("Remove:",e),t(c).timesheet=t(c).timesheet.filter((o,n)=>n!=e),Ot.modified()}function jt(e){S(`/app/year/${R.params.month}/${t(i).getDate()}/timesheet/${e}`)}function W(){return Object.values(t(m)).reduce((e,o)=>e+o,0)}function rt(){let e=wt(t(i),-1);S(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function st(){let e=wt(t(i),1);S(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function It(){const e=se(t(i),{weekStartsOn:1,firstWeekContainsDate:4});S(`/app/year/week/${e}`)}function Lt(e){const o=J.rune.find(l=>l.name==e);let n="";return o!==void 0&&o.color!=="#FFFFFF"&&(n+=`color: ${he(o.color)};`,n+=`background-color: ${o.color};`),n}function Ct(e,o){const n=J.rune.find(d=>d.name==e);let l="";return(n===void 0||n.color.toUpperCase()==="#FFFFFF")&&(l=`${g[o%g.length]}`),l}function nt(e){e.key=="ArrowLeft"&&!P.isFirstDayOfYear(t(i))?rt():e.key=="ArrowRight"&&!P.isLastDayOfYear(t(i))&&st()}le(()=>{window.addEventListener("keydown",nt)}),de(()=>{window.removeEventListener("keydown",nt)});var it=Me(),lt=ot(it);const Ht=A(()=>[et.HomeItem(),et.Item("Days",Q),et.Item("Week-Report",It)]);pe(lt,{name:"Timesheet",get navItems(){return t(Ht)}});var Y=s(lt,2),B=r(Y),Pt=r(B);a(B);var V=s(B,4),X=r(V),dt=s(r(X),2),q=s(dt,4),ct=s(r(q));K(ct,21,()=>t(c).timesheet,kt,(e,o,n)=>{var l=$e(),d=r(l);d.textContent=n+1;var f=s(d),b=r(f,!0);a(f);var p=s(f),D=r(p,!0);a(p);var _=s(p),O=r(_,!0);a(_);var y=s(_),x=r(y),qt=r(x,!0);a(x),a(y);var U=s(y),zt=r(U,!0);a(U);var yt=s(U),xt=r(yt),C=r(xt);C.__click=()=>{jt(n)};var Ut=r(C);ye(Ut,{}),a(C);var G=s(C,2);G.__click=()=>{Nt(n)};var Gt=r(G);_e(Gt,{colorStyle:"text-danger"}),a(G),a(xt),a(yt),a(l),H((Jt,Kt,Zt,te)=>{v(b,t(o).taskName),v(D,Jt),v(O,Kt),$(x,"data-bs-title",`${Zt??""} h`),v(qt,te),v(zt,t(o).quotaType)},[()=>u.formatTimespamp(t(o).start),()=>u.formatTimespamp(t(o).end),()=>u.formatDecimalTime(u.duration(t(o))),()=>at.toFixed(Math.round(u.duration(t(o))*1e4)/1e4,3)]),k(e,l)}),a(ct),a(q);var mt=s(q,4);be(mt,{get selected(){return t(w)},set selected(e){tt(w,N(e))}});var pt=s(mt,6);ve(pt,{get selected(){return t(h)},set selected(e){tt(h,N(e))}});var bt=s(pt,2),vt=s(r(bt),2),Rt=r(vt);Rt.__click=[we,w,h,F,c],a(vt),a(bt),a(X);var ut=s(X,2),z=s(r(ut),2),Qt=r(z);{var Wt=e=>{var o=Mt(),n=ot(o);K(n,18,()=>Object.keys(t(m)).sort(),l=>l,(l,d,f)=>{var b=Se(),p=r(b),D=r(p,!0);a(p),a(b),H((_,O,y,x)=>{$(b,"style",`width: ${_??""}%; height: 50px;`),ce(p,1,`progress-bar ${O??""}`),$(p,"style",y),$(p,"data-bs-title",`${d??""}: ${x??""}%`),v(D,d)},[()=>t(m)[d]/W()*100,()=>Ct(d,t(f)),()=>Lt(d),()=>Math.round(t(m)[d]/W()*1e4)/100]),k(l,b)}),k(e,o)};Dt(Qt,e=>{Object.keys(t(m)).length>0&&e(Wt)})}a(z);var ft=s(z,4),gt=s(r(ft));K(gt,21,()=>Object.keys(t(m)).sort(),kt,(e,o)=>{var n=Fe(),l=r(n),d=r(l,!0);a(l);var f=s(l),b=r(f),p=r(b,!0);a(b),a(f);var D=s(f),_=r(D);a(D),a(n),H((O,y,x)=>{v(d,t(o)),$(b,"data-bs-title",`${O??""} h`),v(p,y),v(_,`${x??""}%`)},[()=>u.formatDecimalTime(Math.round(t(m)[t(o)]*100)/100),()=>at.toFixed(t(m)[t(o)],3),()=>Math.round(t(m)[t(o)]/W()*1e4)/100]),k(e,n)}),a(gt),a(ft),a(ut),a(V);var ht=s(V,2),M=r(ht);M.__click=rt;var Yt=r(M);ue(Yt,{}),oe(2),a(M);var _t=s(M,2);{var Bt=e=>{var o=Ee();o.__click=[De],k(e,o)};Dt(_t,e=>{St(t(i))&&e(Bt)})}var L=s(_t,2);L.__click=st;var Vt=s(r(L),2);fe(Vt,{}),a(L),a(ht),a(Y);var Xt=s(Y,2);xe(Xt,{get show(){return t(F)},set show(e){tt(F,N(e))}}),H((e,o,n,l,d)=>{v(Pt,`Timesheet for ${e??""}${o??""}`),$(dt,"placeholder",n),M.disabled=l,L.disabled=d},[()=>re(t(i),"E dd MMMM yyyy"),()=>St(t(i))?" (Today)":"",()=>at.toFixed(t(E),3),()=>P.isFirstDayOfYear(t(i)),()=>P.isLastDayOfYear(t(i))]),k(I,it),Et()}me(["click"]);function sa(I,T){Ft(T,!0);var i=Mt(),g=ot(i);ne(g,()=>At.isLoaded(),null,(c,h)=>{Oe(c,{})},c=>{ie(c,{})}),k(I,i),Et()}export{sa as component,ra as universal};
