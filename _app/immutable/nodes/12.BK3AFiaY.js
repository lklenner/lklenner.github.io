import"../chunks/Bg9kRutz.js";import{t as w,p as X,c as e,s as n,n as I,r as a,a as Z,f as ee}from"../chunks/DO-sNwcH.js";import{n as D,a as d,t as ae,e as pe,c as me}from"../chunks/lqkcHzyT.js";import{d as ue,f as fe,P as u,S as he,j as ge,k as G,Y as be,D as we,l as ye,s as $,y as q,t as f,a as _e,R as Se}from"../chunks/CA7SxNC3.js";import{a as b,S as Fe}from"../chunks/BjibBYUr.js";import{s as xe}from"../chunks/D9Bo4rd8.js";import{p as v,i as ke}from"../chunks/CXucsld2.js";import{d as ze}from"../chunks/8rSoxpob.js";import{s as h}from"../chunks/CuVvyuch.js";import{o as Te}from"../chunks/DV48Rr-k.js";import{g as Q}from"../chunks/CL7HX6yz.js";import{T as g}from"../chunks/B46hv7NI.js";import{a as p}from"../chunks/BJy7j8il.js";function W(l){return ue(l).getFullYear()}var Me=D('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-file-earmark-arrow-up" viewBox="0 0 16 16"><path d="M8.5 11.5a.5.5 0 0 1-1 0V7.707L6.354 8.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 7.707z"></path><path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"></path></svg>');function Ae(l,r){let s=v(r,"size",3,16);v(r,"colorStyle",3,"");var t=Me();w(()=>{p(t,"width",s()),p(t,"height",s())}),d(l,t)}var Ce=D('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-file-earmark-arrow-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708z"></path><path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"></path></svg>');function Le(l,r){let s=v(r,"size",3,16);v(r,"colorStyle",3,"");var t=Ce();w(()=>{p(t,"width",s()),p(t,"height",s())}),d(l,t)}var Ie=D('<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-file-earmark-arrow-up" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"></path><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"></path></svg>');function De(l,r){let s=v(r,"size",3,16);v(r,"colorStyle",3,"");var t=Ie();w(()=>{p(t,"width",s()),p(t,"height",s())}),d(l,t)}async function Be(l,r){const s=localStorage.getItem(u.localStorageSaveKey);s&&r(s)}var Ee=ae('<p>Successfully found a timesheet.</p> <button type="button" class="btn btn-outline-secondary flex-fill" style="width: 7rem;">Import</button>',1),Ve=ae(`<div class="container my-5"><div class="row p-4 pb-0 pt-lg-5 align-items-center rounded-3 border shadow-lg"><div class="col pb-0 ps-lg-5 pe-lg-5 pt-lg-3"><h1 class="display-4 fw-bold lh-1 text-body-emphasis mb-5">Let's get you started</h1> <div class="accordion" id="accordionExample"><div class="accordion-item"><h2 class="accordion-header"><button type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"><div class="d-flex align-items-center"><!> <div><span class="lead h6 ms-4">Import timesheet from save file</span></div></div></button></h2> <div id="collapseOne" data-bs-parent="#accordionExample"><div class="accordion-body"><p>Select the JSON file storing the timesheet. The file must be initially obtained by creating a new timesheet and saving it after any modification.</p> <div class="mt-3 mb-3" style="max-width: 30rem;"><input class="form-control" type="file" id="formFile"></div> <button type="button" class="btn btn-outline-secondary flex-fill" style="width: 7rem;">Import</button></div></div></div> <div class="accordion-item"><h2 class="accordion-header"><button type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo"><div class="d-flex align-items-center"><!> <div><span class="lead h6 ms-4">Import timesheet from browser storage</span></div></div></button></h2> <div id="collapseTwo" data-bs-parent="#accordionExample"><div class="accordion-body"><!></div></div></div> <div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed lead display-6" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree"><div class="d-flex align-items-center"><!> <div><span class="lead h6 ms-4">Create new timesheet</span></div></div></button></h2> <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample"><div class="accordion-body"><p>A new timesheet is created and loaded into the browser storage.</p> <button type="button" class="btn btn-outline-secondary flex-fill" style="width: 7rem;">New</button></div></div></div></div> <div class="mt-4 mb-3 text-body-secondary d-flex justify-content-center"> </div></div></div></div>`);function Ye(l,r){X(r,!0);const{saveAs:s}=fe,t=localStorage.getItem(u.localStorageSaveKey)!==null;function m(){const i=new Date,o=G.new();o.settings=ge.new(),o.year=be.new(W(i));const c=we.getAllDaysOfYear(W(i));for(const ve of c)o.year.days.push(ye.empty(ve));o.tasks=[g.new("Pause",!1,!0,"#FFFFFF"),g.new("TaskA",!1,!1,"#FFFFFF"),g.new("TaskB",!1,!1,"#FFFFFF"),g.new("TaskC",!1,!1,"#FFFFFF")],$.rune=o.settings,q.rune=o.year,f.rune=f.rune.concat(o.tasks),u.saveToLocalStorage(o),b.rune.loaded=!0,Q("/app")}async function y(){const i=document.getElementById("formFile");if(i.files.length>0){const c=await i.files[0].text();B(c)}b.rune.modified=Fe.Saved}async function B(i){const o=JSON.parse(i);console.log(o);const c=G.import(o);$.rune=c.settings,q.rune=c.year,f.rune=f.rune.concat(c.tasks),u.saveToLocalStorage(),b.rune.loaded=!0,Q("/app")}Te(()=>{window.onbeforeunload=function(){return"Are you sure you want to navigate away?"}});var _=Ve(),E=e(_),V=e(E),S=n(e(V),2),F=e(S),x=e(F),k=e(x);h(k,1,`accordion-button ${(t?"collapsed":"")??""}`);var Y=e(k),te=e(Y);Ae(te,{size:"20"}),I(2),a(Y),a(k),a(x);var z=n(x,2);h(z,1,`accordion-collapse collapse ${(t?"":"show")??""}`);var O=e(z),oe=n(e(O),4);oe.__click=y,a(O),a(z),a(F);var T=n(F,2),M=e(T),A=e(M);h(A,1,`accordion-button ${(t?"":"collapsed")??""} lead display-4`);var H=e(A),se=e(H);Le(se,{size:"20"}),I(2),a(H),a(A),a(M);var C=n(M,2);h(C,1,`accordion-collapse collapse ${(t?"show":"")??""}`);var N=e(C),re=e(N);{var ie=i=>{var o=Ee(),c=n(ee(o),2);c.__click=[Be,B],d(i,o)},le=i=>{var o=pe("There is no timesheet stored in the browser. You must either load a timesheet from a file or create a new one.");d(i,o)};ke(re,i=>{localStorage.getItem(u.localStorageSaveKey)?i(ie):i(le,!1)})}a(N),a(C),a(T);var P=n(T,2),L=e(P),j=e(L),K=e(j),ne=e(K);De(ne,{size:"20"}),I(2),a(K),a(j),a(L);var J=n(L,2),R=e(J),ce=n(e(R),2);ce.__click=m,a(R),a(J),a(P),a(S);var U=n(S,2),de=e(U);a(U),a(V),a(E),a(_),w(()=>xe(de,`v${he.constants.version}`)),d(l,_),Z()}ze(["click"]);function We(l,r){X(r,!0);var s=me(),t=ee(s);_e(t,()=>b.isGo(),null,(m,y)=>{Ye(m,{})},(m,y)=>{Se(m,{})}),d(l,s),Z()}export{We as component};
