import"../chunks/Bg9kRutz.js";import{p as Nt,aj as ae,m as t,N as O,o as oe,f as dt,s,c as o,r as a,v as re,t as C,a as jt}from"../chunks/DCGbEjkp.js";import{t as N,a as T,c as It}from"../chunks/B6we1ui4.js";import{Q as Ft,d as tt,c as et,k as se,D as H,y as Et,T as u,j as Mt,P as Lt,l as ne,a as ie}from"../chunks/Dtfp-KIX.js";import{R as le}from"../chunks/EjqemIE5.js";import{a as Pt}from"../chunks/BVxO1hEQ.js";import{a as at,o as de,c as ce,s as ot}from"../chunks/Cc6sp6Aj.js";import{s as b}from"../chunks/DjLPlESz.js";import{p as A,i as Ot}from"../chunks/R7SZNG97.js";import{a as rt}from"../chunks/D1n0lba_.js";import{s as st}from"../chunks/CQJXRoj6.js";import{s as me}from"../chunks/DctH-kaB.js";import{d as pe}from"../chunks/nxS3RBuk.js";import{p as R}from"../chunks/DMN9UjVb.js";import{g as S}from"../chunks/CxHFiZ8Q.js";import{N as ve}from"../chunks/Cl8tRtSd.js";import{T as be}from"../chunks/D4m22MAx.js";import{Q as ue}from"../chunks/mIJB734P.js";import{A as fe,a as he}from"../chunks/DyJCpP8k.js";import{D as ge,_ as _e}from"../chunks/DVFnT5Qc.js";import{X as ye}from"../chunks/U57Do39M.js";import{N as nt}from"../chunks/BPM-ywpK.js";import{P as xe}from"../chunks/C1ioNu5S.js";import{T as ke}from"../chunks/BaBBfbhg.js";import{N as it}from"../chunks/BVYeyYbP.js";import{T as lt}from"../chunks/XnCWNoMb.js";import{i as At}from"../chunks/DN3jDmyY.js";const Te=!1,sa=Object.freeze(Object.defineProperty({__proto__:null,prerender:Te},Symbol.toStringTag,{value:"Module"}));function we(j,w,n,_,c){const y=document.getElementById("inputStart"),D=document.getElementById("inputEnd");if(!y.reportValidity()||!D.reportValidity())return;const F=y.value,m=D.value,E=u.new(t(w),F,m,t(n),!1);try{u.validate(E)}catch(Q){t(_)("Entry could not be created!",Q.message,"text-bg-danger");return}t(c).timesheet.push(E),u.sortTimesheet(t(c).timesheet),ge.modified(t(c)),console.log(E),Lt.modified(),t(_)("Created entry",t(w),"text-bg-success")}function De(){S("/app/track")}var $e=N('<tr><th scope="row"> </th><td> </td><td> </td><td> </td><td><span> </span></td><td> </td><td><div class="d-flex"><button type="button" class="btn btn-sm d-flex align-items-center"><!></button> <button type="button" class="btn btn-sm d-flex align-items-center"><!></button></div></td></tr>'),Se=N('<div class="progress" role="progressbar"><div> </div></div>'),Fe=N("<tr><td> </td><td><span> </span></td><td> </td></tr>"),Ee=N('<button type="button" class="btn btn-outline-secondary">Switch to Tracking</button>'),Me=N('<!> <div class="container mt-3 mb-3"><h1 class="mt-3 mb-3"> </h1> <ul class="nav nav-tabs" id="myTab" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="editor-tab" data-bs-toggle="tab" data-bs-target="#editor-tab-pane" type="button" role="tab">Editor</button></li> <li class="nav-item" role="presentation"><button class="nav-link" id="statistics-tab" data-bs-toggle="tab" data-bs-target="#statistics-tab-pane" type="button" role="tab">Statistics</button></li></ul> <div class="tab-content mb-5"><div class="tab-pane show active" id="editor-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Total time</h3> <input type="text" class="form-control" disabled> <h3 class="mt-5 mb-3">All entries</h3> <table class="table"><thead><tr><th scope="col">#</th><th scope="col">Task</th><th scope="col">Start</th><th scope="col">End</th><th scope="col">Duration</th><th scope="col">Location</th><th scope="col">Action</th></tr></thead><tbody></tbody></table> <h3 class="mt-5 mb-3">Insert new entry</h3> <!> <form novalidate=""><div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label">Start</label> <div class="col-sm-2"><input type="time" id="inputStart" class="form-control"></div></div></form> <div class="row g-2 mb-3"><label for="inputEnd" class="col-sm-3 col-form-label">End</label> <div class="col-sm-2"><input type="time" id="inputEnd" class="form-control"></div></div> <!> <div class="row g-2 mb-3"><label for="inputStart" class="col-sm-3 col-form-label"></label> <div class="col-sm-5"><button type="button" class="btn btn-secondary">Add Entry</button></div></div></div> <div class="tab-pane" id="statistics-tab-pane" role="tabpanel" tabindex="0"><h3 class="mt-5 mb-3">Task distrubiton</h3> <div class="progress-stacked mb-3 border" style="height: 50px"><!></div> <h3 class="mt-5 mb-3">Task summary</h3> <table class="table"><thead><tr><th scope="col">Task</th><th scope="col">Duration</th><th scope="col">Share</th></tr></thead><tbody></tbody></table></div></div> <div class="d-flex justify-content-between"><button type="button" class="btn btn-outline-secondary"><!> <span style="vertical-align: middle;">Previous</span></button> <!> <button type="button" class="btn btn-outline-secondary"><span style="vertical-align: middle;">Next</span> <!></button></div></div> <!>',1);function Oe(j,w){Nt(w,!0);const n=O(()=>new Date(Et.rune.yearLiteral,R.params.month,R.params.day)),_=["text-bg-primary","text-bg-success","text-bg-danger","text-bg-warning","text-bg-info","text-bg-light","text-bg-dark"];let c=O(()=>Et.getDay(t(n))),y=at(A(Pt.rune.atHome?Ft.Home:Ft.Office)),D=at(A(tt.rune[0].name)),F=at(void 0),m=O(()=>u.aggregateDurations(t(c).timesheet)),E=O(()=>{let e=0;for(const r of t(c).timesheet)e+=u.duration(r);return e});ae(async()=>{t(m),await oe()});function Q(){S(`/app/year/${R.params.month}#${t(n).getDate()}`)}function Ct(e){console.log("Remove:",e),t(c).timesheet=t(c).timesheet.filter((r,i)=>i!=e),Lt.modified()}function Ht(e){S(`/app/year/${R.params.month}/${t(n).getDate()}/timesheet/${e}`)}function W(){return Object.values(t(m)).reduce((e,r)=>e+r,0)}function ct(){let e=Mt(t(n),-1);S(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function mt(){let e=Mt(t(n),1);S(`/app/year/${e.getMonth()}/${e.getDate()}/timesheet`)}function Rt(){const e=ne(t(n),{weekStartsOn:1,firstWeekContainsDate:4});S(`/app/year/week/${e}`)}function Qt(e){const r=tt.rune.find(l=>l.name==e);let i="";return r!==void 0&&r.color!=="#FFFFFF"&&(i+=`color: ${_e(r.color)};`,i+=`background-color: ${r.color};`),i}function Wt(e,r){const i=tt.rune.find(d=>d.name==e);let l="";return(i===void 0||i.color.toUpperCase()==="#FFFFFF")&&(l=`${_[r%_.length]}`),l}function pt(e){e.key=="ArrowLeft"&&!H.isFirstDayOfYear(t(n))?ct():e.key=="ArrowRight"&&!H.isLastDayOfYear(t(n))&&mt()}de(()=>{window.addEventListener("keydown",pt)}),ce(()=>{window.removeEventListener("keydown",pt)});var vt=Me(),bt=dt(vt);const Yt=O(()=>[nt.HomeItem(),nt.Item("Days",Q),nt.Item("Week-Report",Rt)]);ve(bt,{name:"Timesheet",get navItems(){return t(Yt)}});var Y=s(bt,2),B=o(Y),Bt=o(B);a(B);var V=s(B,4),X=o(V),ut=s(o(X),2),q=s(ut,4),ft=s(o(q));et(ft,23,()=>t(c).timesheet,e=>e.id,(e,r,i)=>{var l=$e(),d=o(l),x=o(d,!0);a(d);var p=s(d),h=o(p,!0);a(p);var g=s(p),k=o(g,!0);a(g);var v=s(g),f=o(v,!0);a(v);var $=s(v),U=o($),Kt=o(U,!0);a(U),rt(U,(K,Z)=>{var P;return(P=lt)==null?void 0:P(K,Z)},()=>({toggle:"tooltip",placement:"bottom",title:`${u.formatDecimalTime(u.duration(t(r)))} h`})),a($);var G=s($),Zt=o(G,!0);a(G);var $t=s(G),St=o($t),L=o(St);L.__click=()=>{Ht(t(i))};var te=o(L);xe(te,{}),a(L);var J=s(L,2);J.__click=()=>{Ct(t(i))};var ee=o(J);ye(ee,{colorStyle:"text-danger"}),a(J),a(St),a($t),a(l),C((K,Z,P)=>{b(x,t(i)+1),b(h,t(r).taskName),b(k,K),b(f,Z),b(Kt,P),b(Zt,t(r).quotaType)},[()=>u.formatTimespamp(t(r).start),()=>u.formatTimespamp(t(r).end),()=>it.toFixed(Math.round(u.duration(t(r))*1e4)/1e4,3)]),T(e,l)}),a(ft),a(q);var ht=s(q,4);be(ht,{get selected(){return t(D)},set selected(e){ot(D,A(e))}});var gt=s(ht,6);ue(gt,{get selected(){return t(y)},set selected(e){ot(y,A(e))}});var _t=s(gt,2),yt=s(o(_t),2),Vt=o(yt);Vt.__click=[we,D,y,F,c],a(yt),a(_t),a(X);var xt=s(X,2),z=s(o(xt),2),Xt=o(z);{var qt=e=>{var r=It(),i=dt(r);et(i,19,()=>Object.keys(t(m)).sort(),l=>`${l}${t(n)}`,(l,d,x)=>{var p=Se(),h=o(p),g=o(h,!0);a(h),rt(h,(k,v)=>{var f;return(f=lt)==null?void 0:f(k,v)},()=>({toggle:"tooltip",placement:"bottom",title:`${t(d)}: ${Math.round(t(m)[t(d)]/W()*1e4)/100}%`})),a(p),C((k,v,f)=>{st(p,"style",`width: ${k??""}%; height: 50px;`),me(h,1,`progress-bar ${v??""}`),st(h,"style",f),b(g,t(d))},[()=>t(m)[t(d)]/W()*100,()=>Wt(t(d),t(x)),()=>Qt(t(d))]),T(l,p)}),T(e,r)};Ot(Xt,e=>{Object.keys(t(m)).length>0&&e(qt)})}a(z);var kt=s(z,4),Tt=s(o(kt));et(Tt,23,()=>Object.keys(t(m)).sort(),e=>`${e}${t(n)}`,(e,r)=>{var i=Fe(),l=o(i),d=o(l,!0);a(l);var x=s(l),p=o(x),h=o(p,!0);a(p),rt(p,(v,f)=>{var $;return($=lt)==null?void 0:$(v,f)},()=>({toggle:"tooltip",placement:"bottom",title:`${u.formatDecimalTime(Math.round(t(m)[t(r)]*100)/100)} h`})),a(x);var g=s(x),k=o(g);a(g),a(i),C((v,f)=>{b(d,t(r)),b(h,v),b(k,`${f??""}%`)},[()=>it.toFixed(t(m)[t(r)],3),()=>Math.round(t(m)[t(r)]/W()*1e4)/100]),T(e,i)}),a(Tt),a(kt),a(xt),a(V);var wt=s(V,2),M=o(wt);M.__click=ct;var zt=o(M);fe(zt,{}),re(2),a(M);var Dt=s(M,2);{var Ut=e=>{var r=Ee();r.__click=[De],T(e,r)};Ot(Dt,e=>{At(t(n))&&e(Ut)})}var I=s(Dt,2);I.__click=mt;var Gt=s(o(I),2);he(Gt,{}),a(I),a(wt),a(Y);var Jt=s(Y,2);ke(Jt,{get show(){return t(F)},set show(e){ot(F,A(e))}}),C((e,r,i,l,d)=>{b(Bt,`Timesheet for ${e??""}${r??""}`),st(ut,"placeholder",i),M.disabled=l,I.disabled=d},[()=>se(t(n),"E dd MMMM yyyy"),()=>At(t(n))?" (Today)":"",()=>it.toFixed(t(E),3),()=>H.isFirstDayOfYear(t(n)),()=>H.isLastDayOfYear(t(n))]),T(j,vt),jt()}pe(["click"]);function na(j,w){Nt(w,!0);var n=It(),_=dt(n);ie(_,()=>Pt.isLoaded(),null,(c,y)=>{Oe(c,{})},c=>{le(c,{})}),T(j,n),jt()}export{na as component,sa as universal};
